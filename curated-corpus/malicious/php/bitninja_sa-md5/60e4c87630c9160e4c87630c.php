<?php
function resimYukle($klasor,$adi,$tipi,$genislik,$yukseklik,$yeniisim)
	{
		$dosya="".$klasor."".$adi;

		if(($tipi=='image/jpg') || ($tipi=='image/jpeg') || ($tipi=='image/pjpeg') )
		{
			$resim=imagecreatefromjpeg($dosya); // Yüklenen resimden oluacak yeni bir JPEG resmi oluturuyoruz..
		}
		elseif($tipi=='image/gif')
		{
			$resim=imagecreatefromgif($dosya); // Yüklenen resimden oluacak yeni bir JPEG resmi oluturuyoruz..
		}
		elseif($tipi=='image/png')
		{
			$resim=@imagecreatefrompng($dosya);
		}
	$boyutlar=getimagesize($dosya); // Resmimizin boyutlarn reniyoruz.
	

	
	if ($genislik<>10 && $yukseklik<>10)
	{
		

		if($boyutlar[0]<$genislik)
		{
			$genislik=$boyutlar[0];
		}
		if($boyutlar[1]<$yukseklik)
		{
			$yukseklik=$boyutlar[1];
		}
		
		
		$yeniresim=imagecreatetruecolor($genislik,$yukseklik); // Oluturulan bo resmi istediimiz boyutlara getiriyoruz..
		imagecopyresampled($yeniresim, $resim, 0, 0, 0, 0, $genislik, $yukseklik, $boyutlar[0], $boyutlar[1]);
	
	}
	else
	{
		$resimorani	= $boyutlar[0]; 			// Resmi küçültme/büyütme oranımızı hesaplıyoruz..
		$yeniyukseklik= $boyutlar[1];
		$yeniresim=imagecreatetruecolor($resimorani,$yeniyukseklik); // Oluturulan bo resmi istediimiz boyutlara getiriyoruz..
		imagecopyresampled($yeniresim, $resim, 0, 0, 0, 0, $resimorani, $yeniyukseklik, $boyutlar[0], $boyutlar[1]);
		
	}

$hedefdosya="".$klasor."".$yeniisim.""; // Yeni resimin kaydedilecei konumu belirtiyoruz..
	
		if(($tipi=='image/jpg') || ($tipi=='image/jpeg') || ($tipi=='image/pjpeg') )
		{
			imagejpeg($yeniresim,$hedefdosya,100); // Ve resmi istediimiz konuma kaydediyoruz..
		}
		elseif($tipi=='image/gif')
		{
			imagegif($yeniresim,$hedefdosya,100); // Ve resmi istediimiz konuma kaydediyoruz..
		}
		elseif($tipi=='image/png')
		{
			$quality=100;
			$q=9/100;
			$quality*=$q;
			imagepng($yeniresim,$hedefdosya,$quality);
		}
			return $yeniisim;
	}
	

//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************
//***************RESİM YÜKLEME AYARLARI AŞAĞIDADIR YUKARSINI ELLEME !*****************!__SAMET ERDEM__!*******************************
//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************
//*************************************************************************************************************************************************************

	
$kaynak		=$_FILES["uploadfile"]["tmp_name"]; // Yüklenen Dosyanın Adı;
$klasor		="../yuklenen_is_resim/"; // Hedef Klasor
$adi			=$_FILES["uploadfile"]["name"]; // Dosyanın PCdeki Adı

$orjinalwidth=10;
$orjinalhight=10;

//$d_width2 	=640; // Büyük Dosyanın widthinin ne kadar olacağını giriyoruz
//$d_height2 	=360; // Büyük Dosyanın heightinin ne kadar olacağını giriyoruz

//$d_width3 	=230; // Orta Dosyanın widthinin ne kadar olacağını giriyoruz
//$d_height3 	=104; // Orta Dosyanın heightinin ne kadar olacağını giriyoruz

/* $d_width4 	=66; // Küçük Dosyanın widthinin ne kadar olacağını giriyoruz
$d_height4 	=32; // Küçük Dosyanın heightinin ne kadar olacağını giriyoruz */

$tipi			=$_FILES['uploadfile']['type']; // Dosyanın Tipi
$uzanti		=substr($adi,-4); // Dosya Uzantısı
$rnd			=substr(uniqid(md5(rand())), 0,20); // Dosyayı Yeden İsimlendiriyoruz.
$yeniisim	="urun-resim-$rnd$uzanti";   // Orjinal resim Adı
//$yeniisim2	="urun-resim-$rnd-buyuk$uzanti";	// Büyük resim Adı
//$yeniisim3	="urun-resim-$rnd-orta$uzanti";// Orta resim Adı
// $yeniisim4	="urun-resim-$rnd-kucuk$uzanti";// Küçük resim Adı
$yukle			=$klasor.basename($adi);



	if(move_uploaded_file($kaynak,$yukle))
	{
	
	$imgg1=resimYukle($klasor,$adi,$tipi,$orjinalwidth,$orjinalhight,$yeniisim);	//Orjinal Resim Oluşturduk
	//$imgg2=resimYukle($klasor,$adi,$tipi,$d_width2,$d_height2,$yeniisim2);		//Büyük Resim Oluşturduk
	//$imgg3=resimYukle($klasor,$adi,$tipi,$d_width3,$d_height3,$yeniisim3);		//Orta Resim Oluşturduk
  //$imgg4=resimYukle($klasor,$adi,$tipi,$d_width4,$d_height4,$yeniisim4);		//Küçük Resim Oluşturduk
	
	echo $imgg1 ;
	
	unlink("".$klasor."$adi"); // Yüklemiş Olduğumuz Resmi Siliyoruz
	}
	else 
	{
		echo "Resim Yükleme Hatası";
	}
	

	
?>