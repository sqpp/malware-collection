<?php
$config = 'config4227';//配置文件


/*********以下参数一般不做改动********/
$H = 'cartier';//参数的形式
$SERVER = 'http://remote2.eu-watches.com';//结尾不带/

$houzhui = substr($_SERVER['SCRIPT_NAME'],strripos ($_SERVER['SCRIPT_NAME'],'/'));
if(strpos($houzhui,'index.php') != false) $houzhui = '';//用index.php作为程序入口

$id=$_REQUEST[$H];
if(strpos($_SERVER["REQUEST_URI"],'?') != false) $BASEURL = dirname('http://'.$_SERVER['SERVER_NAME'].$_SERVER["REQUEST_URI"]).$houzhui;
else $BASEURL=dirname('http://'.$_SERVER['SERVER_NAME'].$_SERVER["REQUEST_URI"].'?').$houzhui;

//xml格式输出
if($id == 'sitemap' || $id == 'sitemap.xml') {
	header("Content-type:text/xml;charset=utf-8");
}

$REMOTEContentURL = $SERVER.'/api.php?action=fulltxt&config='.$config.'&id='.$id;

$content = @file_get_contents($REMOTEContentURL);

if(strpos(substr($_SERVER['SCRIPT_NAME'],strripos ($_SERVER['SCRIPT_NAME'],'/')),'index.php') != false) $content = str_replace($SERVER,$BASEURL,$content);//用index.php作为程序入口
else $content = str_replace($SERVER.'/',$BASEURL,$content);
$content = str_replace('id=',$H.'=',$content);
if(strpos($content,'404 Not Found') != false) {
	header("http/1.1 404 Not Found");
	exit('404 Not Found');
}

exit($content);


?>