<?php
require_once __DIR__ . "/../../../include/dbcommon.php";

use Base\{Utils as BaseUtils, Validations};

BaseUtils::executeCatchedScript(function () {
    Validations::validate($_POST, [
        "inizializationCallbackName" => Validations::and([is_string, Validations::IS_NOT_EMPTY]),
        "onRemoveRowFunctionName" => Validations::and([is_string, Validations::IS_NOT_EMPTY]),
        "onProceedFunctionName" => Validations::and([is_string, Validations::IS_NOT_EMPTY]),
    ]);

    $cart = getBBPlannerCart($_SESSION["bbplannerCartRows"] ?: [], $_POST["inizializationCallbackName"], $_POST["onRemoveRowFunctionName"], $_POST["onProceedFunctionName"]);

    return compact("cart");
});
