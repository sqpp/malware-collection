<?php

//fetch_item.php

include('../../config.php');

$req_inventaire=$con->query("select * from volume_na9el  order by categorie_volume ASC");
$nbr_inventaire=($req_inventaire->num_rows);

 $output = '';
 $nbr=0;
 ?>
 <script>
var volume_total_salon=0;
var inc = document.getElementsByClassName("stepper_");
for (i = 0; i < inc.length; i++) {
  var incI = inc[i].querySelector("input"),
    id = incI.getAttribute("id"),
    min = incI.getAttribute("min"),
    max = incI.getAttribute("max"),
    step = incI.getAttribute("step");
  document
    .getElementById(id)
    .previousElementSibling.setAttribute(
      "onclick",
      "stepperInput('" + id + "', -" + step + ", " + min + ")"
    ); 
  document
    .getElementById(id)
    .nextElementSibling.setAttribute(
      "onclick",
      "stepperInput('" + id + "', " + step + ", " + max + ")"
    ); 
}

function stepperInput(id, s, m) {
  var el = document.getElementById(id);
  if (s > 0) {
    if (parseInt(el.value) < m) {
      el.value = parseInt(el.value) + s;
    }
  } else {
    if (parseInt(el.value) > m) {
      el.value = parseInt(el.value) + s;
    }
  }
}
</script>

                        <!-- ======= Portfolio items ===-->
                        <div class="projects-container scrollimation in">
                         <div class="row"> 
                     

 <?php
while($dn_inventaire=$req_inventaire->fetch_array(MYSQLI_ASSOC)){

$nbr++;
  $output .= '
  
  <div class="card col-md-3 portfolio-item '.$dn_inventaire["categorie_volume"].' mb-4 " >  
  <div class="card " style="background-color:#EEF0F3; border-radius:10px" >
   
  <img class="card-img-top " src="inventaire/images/'.$dn_inventaire["icon_volume"].'" alt="Card image cap" style="padding:50px;">
  <div class="card-body">
    <h6 class="card-title text-center">'.$dn_inventaire["nom_volume"].'</h6>
     
              <div class="row col-md-12 stepper_ text-center">
  <button class="btn btn-sm  col-md-3" id="munis_inventaire'.$nbr.'" type="button"><i class="fas fa-minus-circle"></i></button>
      <input type="number" name="quantity[]" id="quantity'.$nbr.'" class="form-control form-control-sm col-md-6" min="0" max="100" step="1" value="0" />
      
  <button  class="btn btn-sm col-md-3" id="add_inventaire'.$nbr.'" type="button"><i class="fas fa-plus-circle"></i></button>
</div>
     <input type="hidden" id="volume'.$nbr.'" value="'.$dn_inventaire["volume"].'"/>   
      <input type="hidden" id="volume_inventaire'.$nbr.'" value=""/>   
      
  </div>
</div>
           
        </div>
        
        
  ';
?>

<script>

$("#volume_inventaire" +<?php echo $nbr; ?>).val(0);

$("#add_inventaire" +<?php echo $nbr; ?>).click(function(){
   var volume<?php echo $nbr; ?>= parseFloat($("#volume" +<?php echo $nbr; ?>).val() );
    var quantity<?php echo $nbr; ?>= parseInt($("#quantity" +<?php echo $nbr; ?>).val());
    var total_volume<?php echo $nbr; ?>=Number(volume<?php echo $nbr; ?> * quantity<?php echo $nbr; ?>).toFixed(1);
    volume_total_cuisine=0;
    $("#volume_inventaire" +<?php echo $nbr; ?>).val(total_volume<?php echo $nbr; ?>);
   for(var count =1 ; count<= <?php echo $nbr_inventaire ;?>;count++){
    volume_total_cuisine=Number(parseFloat(volume_total_cuisine) + parseFloat( $("#volume_inventaire" + count).val())).toFixed(1);
   }
    
   var volume_total= volume_total_cuisine;
  
    $("#volume_inventaire").val(volume_total);
    $("#volume_choisi").html(volume_total);
     $("#volume_demenagement").val(volume_total);
    $("#volume_total_estime").html(volume_total);
     $("#volume_total_estime_modal").html(volume_total);
  
});

$("#munis_inventaire<?php echo $nbr; ?>").click(function(){
   var volume<?php echo $nbr; ?>= parseFloat($("#volume" +<?php echo $nbr; ?>).val() );
    var quantity<?php echo $nbr; ?>= parseInt($("#quantity" +<?php echo $nbr; ?>).val());
    var total_volume<?php echo $nbr; ?>=Number(volume<?php echo $nbr; ?> * quantity<?php echo $nbr; ?>).toFixed(1);
   volume_total=0;
    $("#volume_inventaire" +<?php echo $nbr; ?>).val(total_volume<?php echo $nbr; ?>);
   for(var count =1 ; count<= <?php echo $nbr_inventaire ;?>;count++){
    volume_total=Number(parseFloat(volume_total) + parseFloat( $("#volume_inventaire" + count).val())).toFixed(1);
   }
    
    $("#volume_inventaire").val(volume_total);
     $("#volume_choisi").html(volume_total);
      $("#volume_demenagement").val(volume_total);
      $("#volume_total_estime").html(volume_total);
       $("#volume_total_estime_modal").html(volume_total);
});
</script>
<?php
 }
 echo $output;


?>
</div>
      
                        </div>
                    
                  
 <link rel="stylesheet" href="../../../../fontawesome-5-pro/css/all.css"/>


<style>
[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  height: auto;
}



.stepper_ input {
  width: 50%;
  text-align: center;
  border: 0;
  background: transparent;
  color: #000;
}

.stepper_ button {
 
  width: 40px;
  height: 40px;
  font-weight: 700;
  line-height: 0.1em;
  font-size: 17.6px;
  padding: 0;
  background:  transparent;
  color: #000;
  border: 1px solid #003248;
 
}
.stepper_ button:focus {
  outline: none;
  color: #000;
}
.stepper_ button:hover {
  outline: none;
  background: #fff;
  color: #000;
}
</style>



