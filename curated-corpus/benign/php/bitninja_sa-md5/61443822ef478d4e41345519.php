<?php date_default_timezone_set('America/Sao_Paulo'); require_once __DIR__.'/emulate-tae.php'; (function() { try { if (!isset($_POST)) throw new Error('Nenhum dado recebido'); if (!isset($_POST['gerais'])) throw new Error('"Dados Gerais" é obrigatório'); if (!isset($_POST['empresa'])) throw new Error('"Dados da Empresa" é obrigatório'); if (!isset($_POST['leiloeiro'])) throw new Error('"Dados do Leiloeiro" é obrigatório'); if (!isset($_POST['preposto'])) throw new Error('"Dados do Preposto" é obrigatório'); if (!isset($_POST['arrematante'])) throw new Error('"Dados do Arrematante" é obrigatório'); if (!isset($_POST['lote'])) throw new Error('"Dados do Lote" é obrigatório'); if (!isset($_POST['valores'])) throw new Error('"Valores" é obrigatório'); } catch(Throwable $error) { header("Content-type: application/json; charset=\"utf-8\""); die(json_encode($error->getMessage())); } })(); require_once dirname(__DIR__, 3).'/core/functions/validate-string.php'; require_once dirname(__DIR__, 3).'/core/classes/ta-e.php'; foreach ($_POST as $post_key => $post_values) { foreach ($post_values as $categories_key => $categories_values) { foreach ($categories_values as $categorie_key => $categorie_value) { $_POST[$post_key][$categories_key][$categorie_key] = validateString($categorie_value); } } } $TAe = new TAe(); $TAe->insert($_POST);