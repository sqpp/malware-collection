<?php
$target_dir = "files/";
$target_file = $target_dir . basename($_FILES["fileToUpload"]["name"]);
$uploadOk = 1;
$imageFileType = pathinfo($target_file,PATHINFO_EXTENSION);
//$panduka = finfo_file($finfo, $_FILES['file']['tmp_name']);
//$nelu  = mime_content_type($_FILES['file']['tmp_name']);

//   echo  $panduka ;  
//    echo $nelu ;

// Check if image file is a actual image or fake image

// Check if file already exists
if (file_exists($target_file)) {
    echo "Sorry, file already exists.";
    $uploadOk = 0;
}
// Check file size
if ($_FILES["fileToUpload"]["size"] > 2000000) {
    echo "Sorry, your file is too large.";
    $uploadOk = 0;
}
$allowedExts = array(
  "pdf", 
  "doc", 
  "jpg",
  "docx"
); 

if ( ! ( in_array($imageFileType, $allowedExts ) ) ) {
  die('Sorry, only doc, doc & PDF files are allowed. [E/1].');
}

// this if loop does not work 
if (($_FILES["file"]["type"] == "application/pdf")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "application/msword")
|| ($_FILES["file"]["type"] == "application/msword")
|| ($_FILES["file"]["type"] == "image/pjpeg")
|| ($_FILES["file"]["type"] == "image/x-png")
|| ($_FILES["file"]["type"] == "image/png"))
{
echo $_FILES["file"]["type"] . "Unknown/not permitted file type [E/2]";
}

// Allow certain file formats
if($imageFileType != "jpg" && $imageFileType != "docx" && $imageFileType != "pdf"
&& $imageFileType != "doc" ) {
    echo "Sorry, only doc, doc & PDF files are allowed.[E/3]";
    $uploadOk = 0;
}
// Check if $uploadOk is set to 0 by an error
if ($uploadOk == 0) {
    echo "Sorry, your file was not uploaded.";
// if everything is ok, try to upload file
} else {
    if (move_uploaded_file($_FILES["fileToUpload"]["tmp_name"], $target_file)) {
        echo "The file ". basename( $_FILES["fileToUpload"]["name"]). " has been uploaded ~SLSAJ~ .";
    } else {
        echo "Sorry, there was an error uploading your file.";
        
    }
}
?>