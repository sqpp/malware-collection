<?php

//fetch_item.php

include('../config.php');

$req_fourniture=$con->query("select * from fourniture_na9el order by nom_fourniture ASC");


 $output = '';
 $nbr=0;
 
while($dn_fourniture=$req_fourniture->fetch_array(MYSQLI_ASSOC)){

$nbr++;
  $output .= '
  
  <div class="col-md-3 m-1" style="border:1px solid; border-radius:10px;" >  
  <div class="card" >
  <img class="card-img-top" src="../dashboard_na9el/fournitures/images_fournitures/'.$dn_fourniture["image"].'" alt="Card image cap" width="100" height="100">
  <div class="card-body">
    <h5 class="card-title">'.$dn_fourniture["nom_fourniture"].'</h5>
     <h4 class="text-danger">'.$dn_fourniture["prix_fourniture"].' TND</h4>
     
     
              <span class="row stepper">
  <button class="btn btn-sm  col-md-3" type="button"><i class="fas fa-minus-circle"></i></button>
      <input type="number" name="quantity" id="quantity'.$dn_fourniture["id_fourniture"].'" class="form-control col-md-6" min="1" max="100" step="1" value="1" />
      
  <button  class="btn btn-sm col-md-3" type="button"><i class="fas fa-plus-circle"></i></button>
</span>
         <input type="hidden" name="hidden_name" id="name'.$dn_fourniture["id_fourniture"].'" value="'.$dn_fourniture["nom_fourniture"].'" />
             <input type="hidden" name="hidden_price" id="price'.$dn_fourniture["id_fourniture"].'" value="'.$dn_fourniture["prix_fourniture"].'" />
             <button type="button" name="add_to_cart" id="'.$dn_fourniture["id_fourniture"].'" style="margin-top:5px;" class="btn btn-sm btn-outline btn-success btn-block add_to_cart"><i class="fal fa-cart-plus fa-2x"></i></button>     
    
  </div>
</div>
           
        </div>
  ';
 }
 echo $output;


?>

 <link rel="stylesheet" href="../../../fontawesome-5-pro/css/all.css"/>


<style>
[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  height: auto;
}



.stepper input {
  width: 60%;
  height: 100%;
  text-align: center;
  border: 0;
  background: transparent;
  color: #000;
}

.stepper button {
  width: 40px;
  height: 40px;
  font-weight: 700;
  line-height: 0.1em;
  font-size: 17.6px;
  padding: 0;
  background: #000;
  color: #ffffff;
  border: none;
}
.stepper button:focus {
  outline: none;
  color: #fff;
}
</style>



<script>

var inc = document.getElementsByClassName("stepper");
for (i = 0; i < inc.length; i++) {
  var incI = inc[i].querySelector("input"),
    id = incI.getAttribute("id"),
    min = incI.getAttribute("min"),
    max = incI.getAttribute("max"),
    step = incI.getAttribute("step");
  document
    .getElementById(id)
    .previousElementSibling.setAttribute(
      "onclick",
      "stepperInput('" + id + "', -" + step + ", " + min + ")"
    ); 
  document
    .getElementById(id)
    .nextElementSibling.setAttribute(
      "onclick",
      "stepperInput('" + id + "', " + step + ", " + max + ")"
    ); 
}

function stepperInput(id, s, m) {
  var el = document.getElementById(id);
  if (s > 0) {
    if (parseInt(el.value) < m) {
      el.value = parseInt(el.value) + s;
    }
  } else {
    if (parseInt(el.value) > m) {
      el.value = parseInt(el.value) + s;
    }
  }
}
</script>