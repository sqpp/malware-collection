<?php
	
	require('_DB.php');
	
	$conn = mysqli_connect($dbhost, $dbuser, $dbpass);
	
	if(! $conn ) {
		$jason_flag = 1;
		$jason_msg = mysqli_connect_error();
		$jason = array('flag' => $jason_flag, 'msg' => $jason_msg, 'data' => json_encode($jason_data));
		die(json_encode($jason));
	}
	
	else {
		
		//select database
		
		$db_selected = mysqli_select_db($conn, $dbname);
		
		if (!$db_selected) {
			// If we couldn't, then it either doesn't exist, or we can't see it.

			$sql = 'CREATE DATABASE '.$dbname.';';
	
			if (mysqli_query($conn, $sql)) {
				$jason_flag = 0;
				$db_selected = mysqli_select_db($conn, $dbname);
			} else {
				$jason_flag = 1;
				$jason_msg = $jason_msg . 'Error creating database: ' . mysqli_error($conn) . "<br>";
			}
		}

		//Select tables
		
		$sql = 'CREATE TABLE IF NOT EXISTS brand( '.
			'brand_id INT NOT NULL AUTO_INCREMENT, '.
			'brand_title TEXT NOT NULL, '.
			'brand_des TEXT NOT NULL, '.
			'brand_image_id INT NOT NULL, '.
			'primary key ( brand_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
			
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table brand ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS cate( '.
			'cate_id INT NOT NULL AUTO_INCREMENT, '.
			'cate_title TEXT NOT NULL, '.
			'cate_des TEXT NOT NULL, '.
			'cate_image_id INT NOT NULL, '.
			'primary key ( cate_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
			
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table cate ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS product( '.
			'product_barcode VARCHAR(15) NOT NULL, '.
			'product_ex_barcode VARCHAR(99) NOT NULL, '.
			'product_title TEXT NOT NULL, '.
			'product_short_description TEXT NOT NULL, '.
			'product_long_description TEXT NOT NULL, '.
			'product_cost_price INT NOT NULL, '.
			'product_retail_price INT NOT NULL, '.
			'product_wholesale_price INT NOT NULL, '.
			'product_register_price INT NOT NULL, '.
			'product_brand_id INT NOT NULL, '.
			'product_category_id INT NOT NULL, '.
			'd_img TEXT NOT NULL, '.
			'primary key ( product_barcode ), FOREIGN KEY(product_brand_id) REFERENCES brand(brand_id) ON UPDATE CASCADE, FOREIGN KEY(product_category_id) REFERENCES cate(cate_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
			
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS price_list( '.
			'price_list_id INT NOT NULL AUTO_INCREMENT, '.
			'price_list_title TEXT NOT NULL, '.
			'price_list_des TEXT NOT NULL, '.
			'primary key ( price_list_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
			
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table price_list ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS product_group( '.
			'product_group_id INT NOT NULL AUTO_INCREMENT, '.
			'product_group_title TEXT NOT NULL, '.
			'product_group_des TEXT NOT NULL, '.
			'primary key ( product_group_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
			
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table product_group ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS product_cate( '.
			'product_cate_id INT NOT NULL AUTO_INCREMENT, '.
			'product_cate_product_barcode VARCHAR(15) NOT NULL, '.
			'product_cate_cate_id INT NOT NULL, '.
			'primary key ( product_cate_id ), FOREIGN KEY(product_cate_product_barcode), UNIQUE KEY (product_cate_product_barcode, product_cate_cate_id) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(product_cate_cate_id) REFERENCES cate(cate_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table product_cate ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS product_group_product( '.
			'product_group_product_id INT NOT NULL AUTO_INCREMENT, '.
			'product_group_product_product_barcode VARCHAR(15) NOT NULL, '.
			'product_group_product_product_group_id INT NOT NULL, '.
			'primary key ( product_group_product_id ), FOREIGN KEY(product_group_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(product_group_product_product_group_id) REFERENCES product_group(product_group_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table product_group_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS member( '.
			'member_email VARCHAR(99) NOT NULL, '.
			'member_password VARCHAR(99) NOT NULL, '.
			'member_first_name TEXT NOT NULL, '.
			'member_last_name TEXT NOT NULL, '.
			'member_abn TEXT NOT NULL, '.
			'member_business_name TEXT NOT NULL, '.
			'member_email_address TEXT NOT NULL, '.
			'member_image TEXT NOT NULL, '.
			'member_state VARCHAR(99) NOT NULL, '.
			'member_level INT NOT NULL, '.
			'member_hash VARCHAR(99) NOT NULL, '.
			'member_reg_date DATETIME NOT NULL, '.
			'primary key ( member_email ), UNIQUE KEY ( member_hash ), FOREIGN KEY(member_level) REFERENCES member_group(member_group_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
		
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table member ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS token( '.
			'token_id VARCHAR(99) NOT NULL, '.
			'token_member_email VARCHAR(99) NOT NULL, '.
			'token_title TEXT NOT NULL, '.
			'token_date DATETIME NOT NULL, '.
			'primary key ( token_id ), FOREIGN KEY(token_member_email) REFERENCES member(member_email) ON UPDATE CASCADE ) ENGINE=INNODB DEFAULT CHARSET=latin1;';
		
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table token ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS member_group( '.
			'member_group_id INT NOT NULL AUTO_INCREMENT, '.
			'member_group_name TEXT NOT NULL, '.
			'member_group_des TEXT NOT NULL, '.
			'primary key ( member_group_id ))ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table member_group ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS member_group_permit( '.
			'member_group_permit_id INT NOT NULL, '.
			'member_group_permit_POS INT NOT NULL, '.
			'member_group_permit_EDITER INT NOT NULL, '.
			'member_group_permit_ADMIN INT NOT NULL, '.
			'primary key ( member_group_permit_id ), FOREIGN KEY(member_group_permit_id) REFERENCES member_group(member_group_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table member_group ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS member_group_price_list( '.
			'member_group_price_list_id INT NOT NULL AUTO_INCREMENT, '.
			'member_group_price_list_member_group_id INT NOT NULL, '.
			'member_group_price_list_price_list_id INT NOT NULL, '.
			'primary key ( member_group_price_list_id ), FOREIGN KEY(member_group_price_list_member_group_id) REFERENCES member_group(member_group_id) ON UPDATE CASCADE, FOREIGN KEY(member_group_price_list_price_list_id) REFERENCES price_list(price_list_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table member_group_price_list ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS price_list_product( '.
			'price_list_product_id INT NOT NULL AUTO_INCREMENT, '.
			'price_list_product_product_barcode VARCHAR(15) NOT NULL, '.
			'price_list_product_price_list_id INT NOT NULL, '.
			'price_list_product_price INT NOT NULL, '.
			'primary key ( price_list_product_id ), UNIQUE KEY (price_list_product_product_barcode, price_list_product_price_list_id), FOREIGN KEY(price_list_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(price_list_product_price_list_id) REFERENCES price_list(price_list_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table price_list_price ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS attribute( '.
			'attribute_id INT NOT NULL AUTO_INCREMENT, '.
			'attribute_title TEXT NOT NULL, '.
			'attribute_des TEXT NOT NULL, '.
			'primary key ( attribute_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table attribute ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS attribute_product( '.
			'attribute_product_id INT NOT NULL AUTO_INCREMENT, '.
			'attribute_product_attribute_id INT NOT NULL, '.
			'attribute_product_product_barcode VARCHAR(15) NOT NULL, '.
			'attribute_product_value TEXT NOT NULL, '.
			'primary key ( attribute_product_id ),UNIQUE KEY (attribute_product_attribute_id, attribute_product_product_barcode), FOREIGN KEY(attribute_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(attribute_product_attribute_id) REFERENCES attribute(attribute_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table attribute_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS store( '.
			'store_id INT NOT NULL AUTO_INCREMENT, '.
			'store_title TEXT NOT NULL, '.
			'store_des TEXT NOT NULL, '.
			'primary key ( store_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table store ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS store_product( '.
			'store_product_id INT NOT NULL AUTO_INCREMENT, '.
			'store_product_store_id INT NOT NULL, '.
			'store_product_product_barcode VARCHAR(15) NOT NULL, '.
			'store_product_stock INT NOT NULL, '.
			'store_product_re_stock INT NOT NULL, '.
			'primary key ( store_product_id ), UNIQUE KEY (store_product_store_id, store_product_product_barcode), FOREIGN KEY(store_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(store_product_store_id) REFERENCES store(store_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table store_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS supplier( '.
			'supplier_id INT NOT NULL AUTO_INCREMENT, '.
			'supplier_title TEXT NOT NULL, '.
			'supplier_des TEXT NOT NULL, '.
			'primary key ( supplier_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table supplier ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS supplier_product( '.
			'supplier_product_id INT NOT NULL AUTO_INCREMENT, '.
			'supplier_product_supplier_id INT NOT NULL, '.
			'supplier_product_product_barcode VARCHAR(15) NOT NULL, '.
			'supplier_product_price INT NOT NULL, '.
			'supplier_product_min_amount INT NOT NULL, '.
			'primary key ( supplier_product_id ), UNIQUE KEY (supplier_product_supplier_id, supplier_product_product_barcode), FOREIGN KEY(supplier_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(supplier_product_supplier_id) REFERENCES supplier(supplier_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table supplier_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image( '.
			'image_id INT NOT NULL AUTO_INCREMENT, '.
			'image_name TEXT NOT NULL, '.
			'image_url VARCHAR(127) NOT NULL, '.
			'primary key ( image_id ), UNIQUE KEY ( image_url )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_product( '.
			'image_product_id INT NOT NULL AUTO_INCREMENT, '.
			'image_product_image_id INT NOT NULL, '.
			'image_product_product_barcode VARCHAR(15) NOT NULL, '.
			'primary key ( image_product_id ), FOREIGN KEY(image_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(image_product_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_store( '.
			'image_store_id INT NOT NULL AUTO_INCREMENT, '.
			'image_store_image_id INT NOT NULL, '.
			'image_store_store_id INT NOT NULL, '.
			'primary key ( image_store_id ), FOREIGN KEY(image_store_store_id) REFERENCES store(store_id) ON UPDATE CASCADE, FOREIGN KEY(image_store_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_store ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_supplier( '.
			'image_supplier_id INT NOT NULL AUTO_INCREMENT, '.
			'image_supplier_image_id INT NOT NULL, '.
			'image_supplier_supplier_id INT NOT NULL, '.
			'primary key ( image_supplier_id ), FOREIGN KEY(image_supplier_supplier_id) REFERENCES supplier(supplier_id) ON UPDATE CASCADE, FOREIGN KEY(image_supplier_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_supplier ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_brand( '.
			'image_brand_id INT NOT NULL AUTO_INCREMENT, '.
			'image_brand_image_id INT NOT NULL, '.
			'image_brand_brand_id INT NOT NULL, '.
			'primary key ( image_brand_id ), FOREIGN KEY(image_brand_brand_id) REFERENCES brand(brand_id) ON UPDATE CASCADE, FOREIGN KEY(image_brand_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_brand ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_cate( '.
			'image_cate_id INT NOT NULL AUTO_INCREMENT, '.
			'image_cate_image_id INT NOT NULL, '.
			'image_cate_cate_id INT NOT NULL, '.
			'primary key ( image_cate_id ), FOREIGN KEY(image_cate_cate_id) REFERENCES cate(cate_id) ON UPDATE CASCADE, FOREIGN KEY(image_cate_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_cate ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS address( '.
			'address_id INT NOT NULL AUTO_INCREMENT, '.
			'address_name TEXT NOT NULL, '.
			'address_phone TEXT NOT NULL, '.
			'address_line1 TEXT NOT NULL, '.
			'address_line2 TEXT NOT NULL, '.
			'address_city TEXT NOT NULL, '.
			'address_state TEXT NOT NULL, '.
			'address_zip TEXT NOT NULL, '.
			'address_country TEXT NOT NULL, '.
			'address_lat FLOAT NOT NULL, '.
			'address_lng FLOAT NOT NULL, '.
			'primary key ( address_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table address ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS member_address( '.
			'member_address_id INT NOT NULL AUTO_INCREMENT, '.
			'member_address_member_email VARCHAR(99) NOT NULL, '.
			'member_address_shipping_address_id INT NOT NULL, '.
			'member_address_billing_address_id INT NOT NULL, '.
			'member_address_des TEXT NOT NULL, '.
			'primary key ( member_address_id ), FOREIGN KEY(member_address_member_email) REFERENCES member(member_email) ON UPDATE CASCADE, FOREIGN KEY(member_address_shipping_address_id) REFERENCES address(address_id) ON UPDATE CASCADE, FOREIGN KEY(member_address_billing_address_id) REFERENCES address(address_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table member_address ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS store_address( '.
			'store_address_id INT NOT NULL AUTO_INCREMENT, '.
			'store_address_store_id INT NOT NULL, '.
			'store_address_address_id INT NOT NULL, '.
			'store_address_des INT NOT NULL, '.
			'primary key ( store_address_id ), FOREIGN KEY(store_address_store_id) REFERENCES store(store_id) ON UPDATE CASCADE, FOREIGN KEY(store_address_address_id) REFERENCES address(address_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table store_address ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS shopping_cart( '.
			'shopping_cart_item_id INT NOT NULL AUTO_INCREMENT, '.
			'shopping_cart_item_barcode VARCHAR(15) NOT NULL, '.
			'shopping_cart_item_member_email VARCHAR(99) NOT NULL, '.
			'shopping_cart_item_qty INT NOT NULL, '.
			'primary key ( shopping_cart_item_id ), FOREIGN KEY(shopping_cart_item_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(shopping_cart_item_member_email) REFERENCES member(member_email) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table shopping_cart_item ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS orders( '.
			'order_id VARCHAR(99) NOT NULL, '.
			'order_member_email VARCHAR(99) NOT NULL, '.
			'order_member_abn TEXT NOT NULL, '.
			'order_member_business_name TEXT NOT NULL, '.
			'order_date DATETIME NOT NULL, '.
			'order_amount INT NOT NULL, '.
			'order_payway VARCHAR(15) NOT NULL, '.
			'order_shipping_address_id INT NOT NULL, '.
			'order_billing_address_id INT NOT NULL, '.
			'order_state VARCHAR(99) NOT NULL, '.
			'primary key ( order_id ), FOREIGN KEY(order_shipping_address_id) REFERENCES address(address_id) ON UPDATE CASCADE, FOREIGN KEY(order_billing_address_id) REFERENCES address(address_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table orders.<br>' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS order_list( '.
			'order_list_id INT NOT NULL AUTO_INCREMENT, '.
			'order_order_id VARCHAR(99) NOT NULL, '.
			'order_product_barcode VARCHAR(15) NOT NULL, '.
			'order_product_qty INT NOT NULL, '.
			'order_product_price INT NOT NULL, '.
			'order_product_gst INT NOT NULL, '.
			'order_product_discount INT NOT NULL, '.
			'order_product_discount_amount INT NOT NULL, '.
			'primary key ( order_list_id ), FOREIGN KEY(order_order_id) REFERENCES orders(order_id) ON UPDATE CASCADE, FOREIGN KEY(order_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table order_list.<br>' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS about_us( '.
			'about_us_id INT NOT NULL AUTO_INCREMENT, '.
			'about_us_title TEXT NOT NULL, '.
			'about_us_content TEXT NOT NULL, '.
			'primary key ( about_us_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table about_us.<br>' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_about_us( '.
			'image_about_us_id INT NOT NULL AUTO_INCREMENT, '.
			'image_about_us_image_id INT NOT NULL, '.
			'image_about_us_about_us_id INT NOT NULL, '.
			'primary key ( image_about_us_id ), FOREIGN KEY(image_about_us_about_us_id) REFERENCES about_us(about_us_id) ON UPDATE CASCADE, FOREIGN KEY(image_about_us_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_about_us ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS combined_product( '.
			'combined_product_id INT NOT NULL AUTO_INCREMENT, '.
			'combined_product_product_barcode VARCHAR(15) NOT NULL, '.
			'combined_product_sub_product_barcode VARCHAR(15) NOT NULL, '.
			'combined_product_product_qty INT NOT NULL, '.
			'primary key ( combined_product_id ), FOREIGN KEY(combined_product_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE, FOREIGN KEY(combined_product_sub_product_barcode) REFERENCES product(product_barcode) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table combined_product ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS home_gallery( '.
			'home_gallery_id INT NOT NULL AUTO_INCREMENT, '.
			'home_gallery_layer_1 TEXT NOT NULL, '.
			'home_gallery_layer_2 TEXT NOT NULL, '.
			'primary key ( home_gallery_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table home_gallery ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS image_home_gallery( '.
			'image_home_gallery_id INT NOT NULL AUTO_INCREMENT, '.
			'image_home_gallery_image_id INT NOT NULL, '.
			'image_home_gallery_home_gallery_id INT NOT NULL, '.
			'primary key ( image_home_gallery_id ), FOREIGN KEY(image_home_gallery_home_gallery_id) REFERENCES home_gallery(home_gallery_id) ON UPDATE CASCADE, FOREIGN KEY(image_home_gallery_image_id) REFERENCES image(image_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table image_home_gallery ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS home_slogan( '.
			'home_slogan_id INT NOT NULL AUTO_INCREMENT, '.
			'home_slogan_title TEXT NOT NULL, '.
			'home_slogan_content TEXT NOT NULL, '.
			'home_slogan_icon TEXT NOT NULL, '.
			'primary key ( home_slogan_id )) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table home_slogan ' . mysqli_error($conn) . "<br>";
		}
		
		$sql = 'CREATE TABLE IF NOT EXISTS cate_link( '.
			'cate_link_id INT NOT NULL AUTO_INCREMENT, '.
			'cate_link_father_id INT NOT NULL, '.
			'cate_link_child_id INT NOT NULL, '.
			'primary key ( cate_link_id ), FOREIGN KEY(cate_link_father_id) REFERENCES cate(cate_id) ON UPDATE CASCADE, FOREIGN KEY(cate_link_child_id) REFERENCES cate(cate_id) ON UPDATE CASCADE) ENGINE=INNODB DEFAULT CHARSET=latin1;';
	
		if (mysqli_query($conn, $sql)) {
			$jason_flag = 0;
		} else {
			$jason_flag = 1;
			$jason_msg = $jason_msg . 'Error creating table home_slogan ' . mysqli_error($conn) . "<br>";
		}
		
		mysqli_close($conn);
		
		/* default values */
		
		
	
		$jason = array('flag' => $jason_flag, 'msg' => $jason_msg, 'data' => $jason_data);
		echo json_encode($jason);
	}
?>