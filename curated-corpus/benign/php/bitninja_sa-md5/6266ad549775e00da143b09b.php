<?php
//Initialised the database to connect
//$database = "bruised_reeds_database";
$database = "bruisedr_project";

//The Post data that will be sent
//$phone = $_POST["phone"];

//Database host
$db_host = "localhost";
//$db_host = "https//www.bruisedreedsfoundation.org";

//Database User
//$db_user = "root";
$db_user = "bruisedr";

//Database password
$db_password = "bruised@foundation247";

//Creating the connection
$connection = mysqli_connect($db_host,$db_user,$db_password,$database);

//an array to display response
$response = array();

// on below line we are checking if the body provided by user contains
if($_POST['senderaccount'] 
		&& $_POST['trackingnmumber'] 
		&& $_POST['sendername'] 
		&& $_POST['senderaddress']
		&& $_POST['senderphone'] 
		&& $_POST['recipientname'] 
		&& $_POST['recipientaddress']
		&& $_POST['reccipientphone'] 
		&& $_POST['package'] 
		&& $_POST['delinstructions']
		&& $_POST['delstatus']
		&& $_POST['productcondition'] 
		&& $_POST['productpieces'] 
		&& $_POST['productweight']
		&& $_POST['proddescription'] 
		&& $_POST['delcharges'] 
		&& $_POST['createdat']
		&& $_POST['updatedat'] 
)

{
	// if above three parameters are present then we are extravting values
	// from it and storing it in new variables.
    $senderaccount = $_POST['senderaccount'];
    $trackingnumber = $_POST['trackingnumber'];
    $sendername = $_POST['sendername'];
    $senderaddress = $_POST['senderaddress'];
	$senderphone = $_POST['senderphone'];
    $recipientname = $_POST['recipientname'];
    $recipientaddress = $_POST['recipientaddress'];
    $recipientphone = $_POST['recipientphone'];
	$package = $_POST['package'];
    $delinstructions = $_POST['delinstructions'];
    $delstatus = $_POST['delstatus'];
    $productcondition = $_POST['productcondition'];
	$productpieces = $_POST['productpieces'];
	$productweight = $_POST['productweight'];
    $proddescription = $_POST['proddescription'];
    $delcharges = $_POST['delcharges'];
    $createdat = $_POST['createdat'];
	$updatedat = $_POST['updatedat'];
	// after that we are writing an sql query to
	// add this data to our database.
	// on below line make sure to add your yable name
	// in previous article we have created our table name
	// as courseDb and add all column headers to it except our id.
	$stmt = $connection->prepare("INSERT INTO `ahlogistics_inventory`
	(`senderaccount`, 
	`trackingnumber`, 
	`sendername`, 
	`senderaddress`,
	`senderphone`,
	`recipientname`,
	`recipientaddress`,
	`recipientphone`,
	`package`, 
	`delinstructions`,
	`delstatus`, 
	`productcondition`,
	`productpieces`, 
	`productweight`,
	`proddescription`,
	`delcharges`,
	`createdat`,
	`updatedat`) 
			VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");
	$stmt->bind_param("ssssssssssssssssss",
	$senderaccount,
	$trackingnumber,
	$sendername,
	$senderaddress,
	$senderphone,
	$recipientname,
	$recipientaddress,
	$recipientphone,
	$package,
	$delinstructions,
	$delstatus,
	$productcondition,
	$productpieces,
	$productweight,
	$proddescription,
	$delcharges,
	$createdat,
	$updatedat);

    // on below line we are checking if our sql query is executed succesfully.
if($stmt->execute() == TRUE){
		// if the script is executed succesfully we are
		// passing data to our response object
		// with a success message.
		$response['error'] = false;
		$response['message'] = "course created successfully!";
	} else{
		// if we get any error we are passing error to our object.
		$response['error'] = true;
		$response['message'] = "failed\n ".$connection->error;
	}
} else{
	// this msethod is called when user
	// donot enter sufficient parameters.
	$response['error'] = true;
	$response['message'] = "Insufficient parameters";
}
// at last we are prinintg our response which we get.
echo json_encode($response);
?>
