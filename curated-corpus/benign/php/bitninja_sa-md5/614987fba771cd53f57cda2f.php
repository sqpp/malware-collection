<?php 
include_once("inc/header_inc_fe.php");
include_once("lib/validation.php");
include_once("inc/general.php");

$obj_mastersettings		= new class_mastersettings();

$sick_parameter_value_arr = $obj_mastersettings->list_sick_parameter_value();

if ($_REQUEST['sick_parameter_value'] == ''){
	$_REQUEST['sick_parameter_value'] = 2;
}
if ($_REQUEST['sick_parameter_value_citizen'] == ''){
	$_REQUEST['sick_parameter_value_citizen'] = 2;
}
?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="Covid-19, Covid 19, pandemic, vaccine, epidemiology, epidemiologist, respiratory illness, flu, influenza, Dave Volek, Dave Volek's Pandemic Simulator, public health, infection"/>

<title>:: Pandemic Simulator :: Social Isolation</title>
<!-- Bootstrap 3.3.7-->
<link href="css/bootstrap.css" rel="stylesheet">
<link href="style.css" rel="stylesheet" type="text/css">
<link href="css/meanmenu.css" rel="stylesheet" type="text/css" />
<link href="css/media.css" rel="stylesheet" type="text/css" />

<!--js-->
<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<!--header resize-->
<script src="js/classie.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,900&display=swap" rel="stylesheet"> 
</head>
<body>

<?php
	include_once('header.php');
?>
<div class="clear"></div>

<section class="inner_area">
	<div class="container">
		<div class="contact_area">
			<form name='dsi_form' id='dsi_form' action='hayeshospitalbeds.php' method="post">
				<?php
					foreach($_POST as $key => $value) {
				?>
						<input type='hidden' name='<?php echo $key?>' value='<?php echo $value?>'>
				<?php
					}				
				?>
				<div class="contact_style">
					<h1 style='text-align:center;font-weight:600;color:#538135'>Social Isolation</h1>
					<br />

					Social Isolation means many citizens stay at home. Less contact with other citizens means less transmission. This simulation assumes most citizens comply with this directive. 
					<br /><br />

					<div id='show_parameter' style='display:block'>
						If the number of 	
						<select name="si_sick_parameter_value" class="input1" style='width:40% !important;margin: 0px 0px 0px 0px;'>
							<?php
								foreach($sick_parameter_value_arr as $value){
							?>
									<option value='<?php echo $value[0]?>' <?php echo ($_REQUEST['si_sick_parameter_value'] == $value[0] ? ' selected' : '')?>><?php echo $value[1]?></option>
							<?php
								}
							?>
						</select>
						&nbsp;citizens exceeds <input name="si_sick_parameter_citizen" type="text" id='si_sick_parameter_citizen' value="<?php echo ($_REQUEST['si_sick_parameter_citizen'] == '' ? '20' : $_REQUEST['si_sick_parameter_citizen'])?>" placeholder="" class="input1"  style='width:10% !important;margin: 0px 0px 0px 0px;' />, the social isolation intervention shall be applied. 
						<br /><br />
						If the number of similarly infected citizens falls below <input name="si_sick_citizen" type="text" id='si_sick_citizen' value="<?php echo ($_REQUEST['si_sick_citizen'] == '' ? '10' : $_REQUEST['si_sick_citizen'])?>" placeholder="" class="input1"  style='width:10% !important;margin: 0px 0px 0px 0px;' />, the social isolation intervention shall be lifted. 
					</div>
				</div>
				<br />
				<div class="button_area" style='text-align:center;'>
					<div class="select_area" style='text-align:center'>
						<div class="select_block">Deploy Social Isolation YES/NO &nbsp;&nbsp;<input name="no_social_isolation_yes" id="no_social_isolation_yes"  checked type="radio" value="" onClick='javascript:show_hide_block()'> Yes</div> 
						<div class="select_block"><input name="no_social_isolation_yes" id="no_social_isolation_yes"  type="radio" value="" onClick='javascript:show_hide_block()'> No</div> 
						<div class="clear"></div>
					</div>
					<div class="clear"></div>
					<input name="" type="button" value="Go to Hayes Parameters" class="submit"  onClick='javascript:validate_and_proceed()' />
					<br /><br />
					<input name="" type="button" value="Back to Face Masks." class="submit" onClick='javascript:return_back()' style='background-color:#cfd0c7;border:#000' />
				</div>	
			</form>
		</div>
	</div>
</section>

<section class="googleadd_area">
	<div class="container">
		<div class="googleadd_block"><img src="images/googleadd.jpg" alt=""></div>
		<div class="googleadd_block"><img src="images/googleadd.jpg" alt=""></div>
	</div>
	<div class="clear"></div>
</section>

<?php
	include_once('footer.php');
?>

<SCRIPT LANGUAGE="JavaScript">
<!--
	$(document).ready(function(){
		$("#si_sick_parameter_citizen, #si_sick_citizen").keypress(function (e) {
			 //if the letter is not digit then display error and don't type anything
			 if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) { //46 = .
				//display error message
				return false;
			}
		});			
	});

	function validate_and_proceed(){
		var total_tp;
		var all_ok;
		var msg = '';
		var sick_parameter_citizen;
		var sick_citizen;

		sick_citizen = 0;
		sick_parameter_citizen = 0;
		all_ok = true;
		
		msg = 'The following errors have taken place - ';

		if ($('#no_social_isolation_yes').is(':checked')){
			if ($('#si_sick_parameter_citizen').val() > 200){
				all_ok = false;
				msg += '\n - Number of sick citizen is not within the range. Entered value must be within 0 - 200';
			}
			
			if ($('#si_sick_citizen').val() > 200){
				all_ok = false;
				msg += '\n - Number of sick citizen is not within the range. Entered value must be within 0 - 200';
			}

			sick_parameter_citizen = $('#si_sick_parameter_citizen').val() * 1;
			sick_citizen = $('#si_sick_citizen').val() * 1;

			if (sick_citizen > sick_parameter_citizen){
				all_ok = false;
				msg += '\n - The number of citizens to DEPLOY an intervention must be greater than the number of citizens to LIFT an intervention. ';
			}
		}else{
			all_ok = true;
		}
		
		if (all_ok == false){
			alert(msg);
		}else{
			$('#dsi_form').submit();
		}
	}

	function show_hide_block(){
		if ($('#no_social_isolation_yes').is(':checked')){
			$('#show_parameter').show();
		}else{
			$('#show_parameter').hide();
		}
	}

	function return_back(){
		$('#dsi_form').attr('action', 'hayesmask.php');
		$('#dsi_form').submit();
	}

//-->
</SCRIPT>
</body>
</html>