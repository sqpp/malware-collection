<?php
/**
* 2007-2017 PrestaShop
*
*
* NOTICE OF LICENSE
*
* This source file is subject to the Open Software License (OSL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/osl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
*  @author PrestaShop SA <contact@prestashop.com>
*  @copyright  2007-2016 PrestaShop SA
*  @license    http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
*  International Registered Trademark & Property of PrestaShop SA
*/

require_once(dirname(__FILE__).'/../../../../config/config.inc.php');
require_once(dirname(__FILE__).'/../../../../init.php');
include_once(dirname(__FILE__).'/AdminAjaxController.php');
include_once(dirname(__FILE__).'/AdminSoapController.php');
include_once(dirname(__FILE__).'/AdminEtiquetasController.php');

class Routes extends Module
{
    public function newRoutes()
    {
        switch (Tools::getValue('action')) {
            case 'comprobarEstadosyConfiguracion':
                $controlador = new AdminAjaxController();
                $controlador->comprobarEstadosyConfiguracion();
                break;
            case 'resetToken':
                $controlador = new AdminAjaxController();
                $controlador->resetToken();
                break;
        }

        if (Tools::getValue('token') !=  Configuration::get('CEX_TOKEN')) {
            die("SECURITY POLIZY");
        } else {
            switch (Tools::getValue('action')) {
                case 'comprobarCron':
                    cronPrestashop();
                    break;

            // AJAX CONTROLLER
                case 'getInitForm':
                    $controlador = new AdminAjaxController();
                    $controlador->getInitForm();
                    break;
                case 'getUserConfig':
                    $controlador = new AdminAjaxController();
                    $controlador->getUserConfig();
                    break;
                case 'inicializarToken':
                    $controlador = new AdminAjaxController();
                    $controlador->inicializarToken();
                    break;
                case 'retornarCodigoCliente':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarCodigoCliente();
                    break;
                case 'actualizarCodigoCliente':
                    $controlador = new AdminAjaxController();
                    $controlador->actualizarCodigoCliente();
                    break;
                case 'guardarCodigoCliente':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarCodigoCliente();
                    break;
                case 'borrarCodigoCliente':
                    $controlador = new AdminAjaxController();
                    $controlador->borrarCodigoCliente();
                    break;
                case 'retornarRemitente':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarRemitente();
                    break;
                case 'guardarRemitente':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarRemitente();
                    break;
                case 'actualizarRemitente':
                    $controlador = new AdminAjaxController();
                    $controlador->actualizarRemitente();
                    break;
                case 'borrarRemitente':
                    $controlador = new AdminAjaxController();
                    $controlador->borrarRemitente();
                    break;
                case 'guardarRemitenteDefecto':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarRemitenteDefecto();
                    break;
                case 'guardarCustomerOptions':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarCustomerOptions();
                    break;
                case 'obtenerProductosCex':
                    $controlador = new AdminSoapController();
                    $controlador->obtenerProductosCex();
                    break;
                case 'guardarProductosCex':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarProductosCex();
                    break;
                case 'retornarMapeoTransportistas':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarMapeoTransportistas();
                    break;
                case 'guardarMapeoTransportistas':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarMapeoTransportistas();
                    break;
                case 'retornarPrecioPedido':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarPrecioPedido();
                    break;
                case 'retornarSavedshipsOrdenId':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarSavedshipsOrdenId();
                    break;
                case 'getInitUtilitiesForm':
                    $controlador = new AdminAjaxController();
                    $controlador->getInitUtilitiesForm();
                    break;
                case 'retornarRefenciasDia':
                    $controlador = new AdminAjaxController();
                    $controlador->retornarRefenciasDia();
                    break;
                case 'obtenerPedidosBusqueda':
                    $controlador = new AdminAjaxController();
                    $controlador->obtenerPedidosBusqueda();
                    break;
                case 'cexFormOrderTemplate':
                    $controlador = new AdminAjaxController();
                    $controlador->cexFormOrderTemplate();
                    break;
                case 'sacarTransportistasOficina':
                    $controlador = new AdminAjaxController();
                    $controlador->sacarTransportistasOficina();
                    break;
                case 'procesarCurlOficinaRest':
                    $controlador = new AdminSoapController();
                    $controlador->procesarCurlOficinaRest();
                    break;
                case 'guardarOficinaOrden':
                    $controlador = new AdminAjaxController();
                    $controlador->guardarOficinaOrden();
                    break;

                case 'softDeleteSavedShip':
                    $controlador = new AdminAjaxController();
                    $controlador->softDeleteSavedShip();
                    break;

                case 'ejecutarUpdateDB':
                    $controlador = new AdminAjaxController();
                    $controlador->ejecutarUpdateDB();
                    break;

                case 'cexShopOrderManual':
                    $controlador = new AdminAjaxController();
                    $controlador->cexShopOrderManual();
                    break;

            // ETIQUETAS
                case 'generarEtiquetas':
                    require_once('./../../lib/tcpdf_cex/tcpdf_cex.php');
                    error_reporting(0);
                    $controlador = new AdminEtiquetasController();
                    $controlador->generarEtiquetas();
                    break;
                case 'generarResumen':
                    require_once('./../../lib/tcpdf_cex/tcpdf_cex.php');
                    error_reporting(0);
                    $controlador = new AdminEtiquetasController();
                    $controlador->generarResumen();
                    break;

            // SOAP CONTROLLER
                case 'cexFormPedido':
                    $controlador = new AdminSoapController();
                    $controlador->cexFormPedido();
                    break;
                case 'cexFormPedidos':
                    $controlador = new AdminSoapController();
                    $controlador->cexFormPedidos();
                    break;
                case 'validarCredenciales':
                    $controlador = new AdminSoapController();
                    $controlador->validarCredenciales();
                    break;

                default:
                    exit("POR AQUI, MAL VAS");
                break;
            }
        }
    }
}

$routes = new Routes();
$routes->newRoutes();