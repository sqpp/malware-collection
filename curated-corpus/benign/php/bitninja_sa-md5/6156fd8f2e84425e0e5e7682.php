<?php
//var_dump($_FILES);
/*
if (isset($_FILES['file']) && !empty($_FILES['file'])) {
    $no_files = count($_FILES["file"]['name']);
    for ($i = 0; $i < $no_files; $i++) {
        if ($_FILES["file"]["error"][$i] > 0) {
            echo "Error: " . $_FILES["file"]["error"][$i] . "<br>";
        } else {
            if (file_exists('uploads/' . $_FILES["file"]["name"][$i])) {
                echo 'File already exists : uploads/' . $_FILES["file"]["name"][$i];
            } else {
                move_uploaded_file($_FILES["file"]["tmp_name"][$i], 'uploads/' . $_FILES["file"]["name"][$i]);
                echo 'File successfully uploaded : uploads/' . $_FILES["files"]["name"][$i] . ' ';
            }
        }
    }
} else {
    echo 'Please choose at least one file';
}
*/
//var_dump($_FILES['file']['name']);
$count = 0; $success_count=0; $fail_count=0;	
foreach ($_FILES['file']['name'] as $filename) 
{
	$res = move_uploaded_file($_FILES['file']['tmp_name'][$count], 'uploads/' . $_FILES['file']['name'][$count]);
	if($res == true){
		$msg[$count]= 'Successfully Uploaded File';
		$data[$count] = $_FILES['file']['name'][$count];
		$success_count+=1;
	} else {
		$msg[$count]= 'Error Uploading File';
		$data[$count] = $_FILES['file']['name'][$count];
		$fail_count+=1;
	}
	$count=$count + 1;
}
if($fail_count==$count){
	$status = 0;
} else {
	$status = 1;
}
//var_dump($msg);
//var_dump($data);
//die();
/*   
   if ( 0 < $_FILES['file']['error'] ) {
        $msg= 'Error: ' . $_FILES['file']['error'];
		$data =0;
		$status = 0;
    }
    else {
        move_uploaded_file($_FILES['file']['tmp_name'], 'uploads/' . $_FILES['file']['name']);
		$msg= 'Successfully Uploaded File';
		$data = $_FILES['file']['name'];
		$status = 1;
    }
	*/
	echo(json_encode(array('msg' => $msg, 'data' => $data, 'status' => $status)));
?>