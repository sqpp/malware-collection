<?php

include_once "inc/header_inc_fe.php";
include_once "lib/validation.php";
include_once "inc/general.php";
$obj_mastersettings = new class_mastersettings();
//$default_type = '', $default_value_id = 0, $ord='', $ordfield='', $pg = 1, $numrecspg = 10, $pagination = 'N'
$hospital_beds_arr = $obj_mastersettings->list_default_value('O', 20);
$d_default_value_arr = $obj_mastersettings->list_default_value('D');
$t_default_value_arr = $obj_mastersettings->list_default_value('T');
$p_default_value_arr = $obj_mastersettings->list_default_value('P');
$o_default_value_arr = $obj_mastersettings->list_default_value('O');
include_once 'header.php';
?>
<div class="clear"></div>

<section class="inner_area">
	<div class="container">
		<div class="contact_area">
			<form name='dsi_form' id='dsi_form' action='hayesrun.php' method="post">
				<?php 
foreach ($_POST as $key => $value) {
    ?>
						<input type='hidden' name='<?php 
    echo $key;
    ?>' value='<?php 
    echo $value;
    ?>'>
				<?php 
}
?>
				<div class="contact_style">
					<h1 style='text-align:center;font-weight:600;color:#538135'>HOSPITAL BEDS</h1>
					<br />

					Hospitals beds represents your preparedness for the pandemic. A hospital bed represents an opportunity for a very sick citizen to recover from the disease.
					<br /><br />
					If a very sick citizen's health worsens, that citizen can be sent to the hospital to receive better care and prolong life. Such a citizen can become healthy again. But not always. 
					<br /><br />
					But if there is no available hospital bed, that very sick citizen dies. 
					<br /><br />
					Hospital beds require tax dollars to fund. So too many unused hospital beds reduces your political popularity. 

					<div class="table_area" style='width:100%'>
						<div class="table_block table_blockheading">
							<div class="table_block_block" style='width:70%;text-align:left;padding-left:10px'></div>	
							<div class="table_block_block" style='width:30%;text-align:center;padding-left:10px'>Default</div>	
							<div class="clear"></div>
						</div>
						<?php 
$ctr = 0;
foreach ($hospital_beds_arr as $value) {
    $ctr++;
    ?>
								<div class="table_block">
									<div class="table_block_block" style='width:70%;text-align:left;padding-left:10px'><?php 
    echo $value[2];
    ?></div>
									<div class="table_block_block" style='width:30%;text-align:center'>
										<input name="op_<?php 
    echo $value[0];
    ?>" id='op_<?php 
    echo $ctr;
    ?>' type="text" value="<?php 
    echo trim($_POST['op_' . $value[0]]) != '' ? trim($_POST['op_' . $value[0]]) : $value[4];
    ?>" placeholder="" class="input1" style='width:60%' />
										<?php 
    if ($value[7] == 'P') {
        echo ' %';
    }
    ?>
										<input id='op_from_<?php 
    echo $ctr;
    ?>' type="hidden" value="<?php 
    echo $value[5];
    ?>"  />
										<input id='op_to_<?php 
    echo $ctr;
    ?>' type="hidden" value="<?php 
    echo $value[6];
    ?>"  />
										<input id='op_text_<?php 
    echo $ctr;
    ?>' type="hidden" value="<?php 
    echo $value[2];
    ?>"  />

									</div>	
									<div class="clear"></div>
								</div>
						<?php 
}
?>
						<input id='total_op' type="hidden" value="<?php 
echo $ctr;
?>"  />
					</div>
				</div>
				<br />
				<div class="button_area" style='text-align:center;'>
					<div class="clear"></div>
					<input name="" type="button" value="Go to Run" class="submit"  onClick='javascript:validate_and_proceed()' />
					<br /><br />
					<input name="" type="button" value="Back to Social Isolation" class="submit" onClick='javascript:return_back()' style='background-color:#cfd0c7;border:#000' />
				</div>	
			</form>
		</div>
	</div>
</section>

<section class="googleadd_area">
	<div class="container">
		<div class="googleadd_block"><img src="images/googleadd.jpg" alt=""></div>
		<div class="googleadd_block"><img src="images/googleadd.jpg" alt=""></div>
	</div>
	<div class="clear"></div>
</section>

<?php 
include_once 'footer.php';
?>

<SCRIPT LANGUAGE="JavaScript">
<!--
	$(document).ready(function(){
		$("[id^=op_]").keypress(function (e) {
			 //if the letter is not digit then display error and don't type anything
			 if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) { //46 = .
				//display error message
				return false;
			}
		});			
	});

	function validate_and_proceed(){
		var total_op;
		var all_ok;
		var msg = '';
		var op_from;
		var op_to;
		var op;

		all_ok = true;
		msg = 'The following errors have taken place - ';

		total_op = $('#total_op').val() * 1;
		op_from = 0;
		op_to = 0;
		op = 0;

		for(ctr = 1; ctr <= total_op; ctr++){
			op_from = $('#op_from_' + ctr).val() * 1;
			op_to = $('#op_to_' + ctr).val() * 1;
			op = $('#op_' + ctr).val() * 1;

			//alert(dsi + ' ' +  dsi_from + ' ' +  dsi_to);
			
			if (op < op_from || op > op_to){
				all_ok = false;
				msg += '\n - ' + $('#op_text_' + ctr).val() + ' is not within the range. Entered value must be within ' + op_from + ' - ' + op_to;
			 }
		}

		if (all_ok == false){
			alert(msg);
		}else{
			$('#dsi_form').submit();
		}
	}

	function return_back(){
		//$('#dsi_form').attr('action', 'disease-progression-setup.php');
		
		$('#dsi_form').attr('action', 'hayeslockdown.php');
		$('#dsi_form').submit();
	}


//-->
</SCRIPT>
</body>
</html>