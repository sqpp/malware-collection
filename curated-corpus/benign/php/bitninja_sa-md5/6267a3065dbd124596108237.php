<?php 
    // Database
    include '../database/config.php'; 

  
$fileName='gallery'.rand(1111,9999).$_FILES ['file'] ['name'];

$que="insert into gallery (image) values(:image)";
     $result=$conn->prepare($que);
     $result->execute([
    ':image' => $fileName
]);
     $result=$conn->prepare($que);
    //echo $fileName; 
$filePath='../uploads/gallery/'.$fileName;
    if(file_exists($filePath)){
        header(':', true, 403); // or http_response_code(403); for php>=5.4
        echo 'File exist!'; //Custom error From Server
        return;
    }else{
        if (!move_uploaded_file($_FILES ['file'] ['tmp_name'], $filePath)) {
             $errors = error_get_last();
             header(':', true, 403); // or http_response_code(403); for php>=5.4
             echo $errors; //Error From Server
             return;
        }
    }
    $status='success';
echo $status;
?>