<?php
error_reporting(0);
define("WP", 	0); 
define("JO", 	1); 
define("MA", 	2); 
define("TO", 	3); 
$engine = '0';

$db = new mysqli('localhost', '', '', '');
if (!$db->connect_error && !mysqli_connect_errno()) {
	$sql = '';
	switch ($engine) {
		case WP: {
			$sql = "SELECT COUNT(*) FROM wp_posts WHERE (post_type='page' OR post_type = 'post') and CHAR_LENGTH(TRIM(post_content)) > 512 and post_status = 'publish' and TO_DAYS(NOW()) - TO_DAYS(post_modified) > 30";
			break;
		}
		case JO: {
			$sql = "SELECT COUNT(*) FROM wp_content WHERE access=1 AND state=1 and (CHAR_LENGTH(TRIM(`fulltext`)) > 512 or CHAR_LENGTH(TRIM(`introtext`)) > 512) and TO_DAYS(NOW()) - TO_DAYS(modified) > 30";
			break;
		}
		case MA: {
			$sql = "SELECT COUNT(*) FROM wp_cms_page WHERE is_active=1 and (CHAR_LENGTH(TRIM(`content`)) > 512) and TO_DAYS(NOW()) - TO_DAYS(update_time) > 30";
			break;
		}
		case TO: {
			$sql = "SELECT COUNT(*) FROM wp_tt_content WHERE hidden=0 and CType = 'text' and deleted=0 and (CHAR_LENGTH(TRIM(`bodytext`)) > 512) and TO_DAYS(NOW()) - TO_DAYS(FROM_UNIXTIME(tstamp)) > 30";
			break;
		}
		default: {
			echo 'unknown engine';
			exit();
		}
	}
	$result = $db->query($sql);
	$row = $result->fetch_array();
	echo $row[0];
} else {
	echo "connection error";
}
?>