<script language="javascript">
function username_check(){
 
   var username = $('#email').val();
   if(username == "" || username.length < 4)
   {
      $('#email').css('border', '3px #CCC solid');
      $('#tick').hide();
   }
   else
   {
      jQuery.ajax({
      type: "POST",
      url: "./prc/checkdb.php",
      data: 'username='+ username,
      cache: false,
      success: function(response)
      {
         if(response == 1)
         {
            $('#email').css('border', '3px #C33 solid');
            $('#tick').hide();
            $('#cross').fadeIn();
         }
         else
         {
            $('#email').css('border', '3px #090 solid');
            $('#cross').hide();
            $('#tick').fadeIn();
         }
      }
      });
   }

}
</script>
<?php
// Function to check whether a given hostName is a valid email
// domain address.
 $email=$_POST['email'];
 $parts = explode('@', $email);
 $domain = array_pop($parts);
 $user= implode('@', $parts);
 function myCheckDNSRR($domain, $recType = '')
{
	if(!empty($domain)) {
		if( $recType == '' ) $recType = "MX";
		exec("nslookup -type=$recType $domain", $result);
		// check each line to find the one that starts with the host
		// name. If it exists then the function succeeded.
		foreach ($result as $line) {
			if(eregi("^$domain",$line)) {
				return true;
			}
		}
		// otherwise there was no mail handler for the domain
		return false;
	}
	return false;
}

// If you are running this test on a Windows machine, you'll need to
// uncomment the next line and comment out the checkdnsrr call:
if (myCheckDNSRR($domain,"MX"))
//if (checkdnsrr("joemarini.com","MX"))
{
   $replace = array(" ",".",",","'","@");
   $email = str_replace($replace,"",$email);
	echo "Database name will be:" .$email;
}
 else
{	
  echo "nope - invalid email!";
}
?>
<script language="javascript">
$(document).ready(
   function()
   {
      $('#email').keyup(username_check);
   });

</script>