#!/bin/bash

echo "File size distribution:"
find ../curated-corpus -type f -print0 | xargs -0 ls -l | awk '{size[int(log($5)/log(2))]++}END{for (i in size) printf("%10d %3d\n", 2^i, size[i])}' | sort -n

echo "Removing files with size 200k and more."
find ../curated-corpus -type f -size +200k| xargs rm $1

echo "Removing files with size 4 byte r less"
find ../curated-corpus -type f -size -4| xargs rm $1

echo "New file size distribution:"
find ../curated-corpus -type f -print0 | xargs -0 ls -l | awk '{size[int(log($5)/log(2))]++}END{for (i in size) printf("%10d %3d\n", 2^i, size[i])}' | sort -n
